"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5613],{9613:(e,t,n)=>{n.d(t,{Zo:()=>g,kt:()=>d});var a=n(9496);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var o=a.createContext({}),s=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},g=function(e){var t=s(e.components);return a.createElement(o.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},k=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,o=e.parentName,g=i(e,["components","mdxType","originalType","parentName"]),u=s(n),k=l,d=u["".concat(o,".").concat(k)]||u[k]||m[k]||r;return n?a.createElement(d,p(p({ref:t},g),{},{components:n})):a.createElement(d,p({ref:t},g))}));function d(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,p=new Array(r);p[0]=k;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i[u]="string"==typeof e?e:l,p[1]=i;for(var s=2;s<r;s++)p[s]=n[s];return a.createElement.apply(null,p)}return a.createElement.apply(null,n)}k.displayName="MDXCreateElement"},6923:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>p,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>s});var a=n(1966),l=(n(9496),n(9613));const r={title:"pflag - \u66f4\u597d\u7684PHP\u547d\u4ee4\u884c\u9009\u9879\u89e3\u6790\u5e93",tags:["php","cli","command-line","parser"],date:"2021-10-11T15:11",slug:"pflag-better-php-command-line-parse-library",authors:"inhere"},p=void 0,i={permalink:"/en/blog/pflag-better-php-command-line-parse-library",editUrl:"https://github.com/inhere/inhere.github.io/tree/main/blog/2021/10-11-pflag-better-php-command-line-parse-library.md",source:"@site/blog/2021/10-11-pflag-better-php-command-line-parse-library.md",title:"pflag - \u66f4\u597d\u7684PHP\u547d\u4ee4\u884c\u9009\u9879\u89e3\u6790\u5e93",description:"php-toolkit/pflag \u662f\u4e00\u4e2aPHP\u7f16\u5199\u7684\uff0c\u901a\u7528\u7684\u547d\u4ee4\u884c\u6807\u5fd7(\u9009\u9879\u548c\u53c2\u6570)\u89e3\u6790\u5e93\u3002",date:"2021-10-11T15:11:00.000Z",formattedDate:"October 11, 2021",tags:[{label:"php",permalink:"/en/blog/tags/php"},{label:"cli",permalink:"/en/blog/tags/cli"},{label:"command-line",permalink:"/en/blog/tags/command-line"},{label:"parser",permalink:"/en/blog/tags/parser"}],readingTime:7.755,hasTruncateMarker:!0,authors:[{name:"inhere",title:"docs maintainer",url:"https://github.com/inhere",imageURL:"https://github.com/inhere.png",key:"inhere"}],frontMatter:{title:"pflag - \u66f4\u597d\u7684PHP\u547d\u4ee4\u884c\u9009\u9879\u89e3\u6790\u5e93",tags:["php","cli","command-line","parser"],date:"2021-10-11T15:11",slug:"pflag-better-php-command-line-parse-library",authors:"inhere"},prevItem:{title:"slog - Lightweight, configurable, extensible Go logging library",permalink:"/en/blog/gookit-slog-intro"},nextItem:{title:"\u5b66\u4e60\u7f16\u5199bash\u547d\u4ee4\u81ea\u52a8\u8865\u5168",permalink:"/en/blog/2021/08/09/learn-bash-completion"}},o={authorsImageUrls:[void 0]},s=[{value:"\u529f\u80fd\u8bf4\u660e",id:"\u529f\u80fd\u8bf4\u660e",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"Flags \u4f7f\u7528",id:"flags-\u4f7f\u7528",level:2},{value:"\u521b\u5efa\u89e3\u6790\u5668",id:"\u521b\u5efa\u89e3\u6790\u5668",level:3},{value:"\u5b9a\u4e49\u9009\u9879",id:"\u5b9a\u4e49\u9009\u9879",level:3},{value:"\u5b9a\u4e49\u53c2\u6570",id:"\u5b9a\u4e49\u53c2\u6570",level:3},{value:"\u89e3\u6790\u547d\u4ee4\u884c\u8f93\u5165",id:"\u89e3\u6790\u547d\u4ee4\u884c\u8f93\u5165",level:3},{value:"\u83b7\u53d6\u8f93\u5165\u503c",id:"\u83b7\u53d6\u8f93\u5165\u503c",level:2},{value:"\u6269\u5c55\uff1a\u89c4\u5219\u5b9a\u4e49",id:"\u6269\u5c55\u89c4\u5219\u5b9a\u4e49",level:2},{value:"\u81ea\u5b9a\u4e49\u8bbe\u7f6e",id:"\u81ea\u5b9a\u4e49\u8bbe\u7f6e",level:2},{value:"\u89e3\u6790\u8bbe\u7f6e",id:"\u89e3\u6790\u8bbe\u7f6e",level:3},{value:"\u6e32\u67d3\u5e2e\u52a9\u8bbe\u7f6e",id:"\u6e32\u67d3\u5e2e\u52a9\u8bbe\u7f6e",level:3},{value:"\u5355\u5143\u6d4b\u8bd5",id:"\u5355\u5143\u6d4b\u8bd5",level:2},{value:"\u4f7f\u7528pflag\u7684\u9879\u76ee",id:"\u4f7f\u7528pflag\u7684\u9879\u76ee",level:2}],g={toc:s},u="wrapper";function m(e){let{components:t,...n}=e;return(0,l.kt)(u,(0,a.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"php-toolkit/pflag")," \u662f\u4e00\u4e2aPHP\u7f16\u5199\u7684\uff0c\u901a\u7528\u7684\u547d\u4ee4\u884c\u6807\u5fd7(\u9009\u9879\u548c\u53c2\u6570)\u89e3\u6790\u5e93\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://github.com/php-toolkit/pflag/blob/main/example/images/flags-demo.png?raw=true",alt:"flags-demo"})),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Github \u4ed3\u5e93: ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/php-toolkit/pflag"},"php-toolkit/pflag"))),(0,l.kt)("h2",{id:"\u529f\u80fd\u8bf4\u660e"},"\u529f\u80fd\u8bf4\u660e"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u901a\u7528\u7684\u547d\u4ee4\u884c\u9009\u9879\u548c\u53c2\u6570\u89e3\u6790\u5668"),(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301\u8bbe\u7f6e\u503c\u6570\u636e\u7c7b\u578b(",(0,l.kt)("inlineCode",{parentName:"li"},"int,string,bool,array"),")\uff0c\u5c06\u81ea\u52a8\u683c\u5f0f\u5316\u8f93\u5165\u503c"),(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301\u4e3a\u9009\u9879/\u53c2\u6570\u8bbe\u7f6e\u9ed8\u8ba4\u503c"),(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301\u4e3a\u4e00\u4e2a\u9009\u9879\u8bbe\u7f6e\u591a\u4e2a\u77ed\u540d\u79f0"),(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301\u4ece\u73af\u5883\u53d8\u91cf\u8bfb\u53d6\u6807\u5fd7\u503c"),(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301\u8bbe\u7f6e\u9009\u9879/\u53c2\u6570\u4e3a\u5fc5\u987b\u7684(",(0,l.kt)("inlineCode",{parentName:"li"},"required"),")"),(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301\u8bbe\u7f6e\u9a8c\u8bc1\u5668\u4ee5\u68c0\u67e5\u8f93\u5165\u503c"),(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301\u81ea\u52a8\u6e32\u67d3\u6f02\u4eae\u7684\u5e2e\u52a9\u4fe1\u606f\u3002")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u547d\u4ee4\u884c\u9009\u9879"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u9009\u9879\u4ee5 ",(0,l.kt)("inlineCode",{parentName:"li"},"-")," \u6216\u8005 ",(0,l.kt)("inlineCode",{parentName:"li"},"--")," \u5f00\u5934\u7684\uff0c\u4e14\u9996\u5b57\u7b26\u5fc5\u987b\u662f\u5b57\u6bcd"),(0,l.kt)("li",{parentName:"ul"},"\u4ee5 ",(0,l.kt)("inlineCode",{parentName:"li"},"--")," \u5f00\u5934\u7684\u4e3a\u957f\u9009\u9879. eg: ",(0,l.kt)("inlineCode",{parentName:"li"},"--long")," ",(0,l.kt)("inlineCode",{parentName:"li"},"--long value")),(0,l.kt)("li",{parentName:"ul"},"\u4ee5 ",(0,l.kt)("inlineCode",{parentName:"li"},"-")," \u5f00\u5934\u7684\u4e3a\u77ed\u9009\u9879 ",(0,l.kt)("inlineCode",{parentName:"li"},"-s -a value")),(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301\u5b9a\u4e49\u6570\u7ec4\u9009\u9879",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"eg: ",(0,l.kt)("inlineCode",{parentName:"li"},"--tag php --tag go")," \u5c06\u4f1a\u5f97\u5230 ",(0,l.kt)("inlineCode",{parentName:"li"},"$tag = [php, go]"))))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u547d\u4ee4\u884c\u53c2\u6570"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u80fd\u6ee1\u8db3\u9009\u9879\u7684\u90fd\u8ba4\u4f5c\u53c2\u6570"),(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301\u7ed1\u5b9a\u547d\u540d\u53c2\u6570"),(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301\u5b9a\u4e49\u6570\u7ec4\u53c2\u6570")),(0,l.kt)("h2",{id:"\u5b89\u88c5"},"\u5b89\u88c5"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"composer \u5b89\u88c5")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"composer require toolkit/pflag\n")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"flags-\u4f7f\u7528"},"Flags \u4f7f\u7528"),(0,l.kt)("p",null,"Flags - \u662f\u4e00\u4e2a\u547d\u4ee4\u884c\u6807\u5fd7\uff08\u9009\u9879\u548c\u53c2\u6570\uff09\u89e3\u6790\u5668\u548c\u7ba1\u7406\u5668\u3002"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u793a\u4f8b\u4ee3\u7801\u8bf7\u53c2\u89c1 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/php-toolkit/pflag/blob/main/example/flags-demo.php"},"example/flags-demo.php"))),(0,l.kt)("h3",{id:"\u521b\u5efa\u89e3\u6790\u5668"},"\u521b\u5efa\u89e3\u6790\u5668"),(0,l.kt)("p",null,"\u521b\u5efa\u548c\u521d\u59cb\u5316\u89e3\u6790\u5668"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"use Toolkit\\PFlag\\Flags;\n\nrequire dirname(__DIR__) . '/test/bootstrap.php';\n\n$flags = $_SERVER['argv'];\n// NOTICE: must shift first element.\n$scriptFile = array_shift($flags);\n\n$fs = Flags::new();\n\n// \uff08\u53ef\u9009\u7684\uff09\u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e9b\u81ea\u5b9a\u4e49\u8bbe\u7f6e\n$fs->setScriptFile($scriptFile);\n/** @see Flags::$settings */\n$fs->setSettings([\n    'descNlOnOptLen' => 26\n]);\n\n// ...\n")),(0,l.kt)("h3",{id:"\u5b9a\u4e49\u9009\u9879"},"\u5b9a\u4e49\u9009\u9879"),(0,l.kt)("p",null,"\u5b9a\u4e49\u9009\u9879 - \u5b9a\u4e49\u597d\u652f\u6301\u7684\u9009\u9879\u8bbe\u7f6e\uff0c\u89e3\u6790\u65f6\u5c06\u4f1a\u6839\u636e\u5b9a\u4e49\u6765\u89e3\u6790\u8f93\u5165"),(0,l.kt)("p",null,"\u6dfb\u52a0\u9009\u9879\u5b9a\u4e49\u7684\u793a\u4f8b:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"use Toolkit\\PFlag\\Flag\\Option;\nuse Toolkit\\PFlag\\FlagType;\nuse Toolkit\\PFlag\\Validator\\EnumValidator;\n\n// add options\n// - quick add\n$fs->addOpt('age', 'a', 'this is a int option', FlagType::INT);\n\n// - \u4f7f\u7528\u5b57\u7b26\u4e32\u89c4\u5219\u5feb\u901f\u6dfb\u52a0\u9009\u9879\u5b9a\u4e49\n$fs->addOptByRule('name,n', 'string;this is a string option;true');\n\n// -- \u4e00\u6b21\u6dfb\u52a0\u591a\u4e2a\u9009\u9879\n$fs->addOptsByRules([\n    'tag,t' => 'strings;array option, allow set multi times',\n    'f'     => 'bool;this is an bool option',\n]);\n\n// - \u4f7f\u7528\u6570\u7ec4\u5b9a\u4e49\n/** @see Flags::DEFINE_ITEM for array rule */\n$fs->addOptByRule('name-is-very-lang', [\n    'type'   => FlagType::STRING,\n    'desc'   => 'option name is to lang, desc will print on newline',\n    'shorts' => ['d','e','f'],\n    // TIP: add validator limit input value.\n    'validator' => EnumValidator::new(['one', 'two', 'three']),\n]);\n\n// - \u4f7f\u7528 Option \u5bf9\u8c61\n$opt = Option::new('str1', \"this is  string option, \\ndesc has multi line, \\nhaha...\");\n$opt->setDefault('defVal');\n$fs->addOption($opt);\n")),(0,l.kt)("h3",{id:"\u5b9a\u4e49\u53c2\u6570"},"\u5b9a\u4e49\u53c2\u6570"),(0,l.kt)("p",null,"\u5b9a\u4e49\u53c2\u6570 - \u5b9a\u4e49\u597d\u652f\u6301\u7684\u9009\u9879\u8bbe\u7f6e\uff0c\u89e3\u6790\u65f6\u5c06\u4f1a\u6839\u636e\u5b9a\u4e49\u6765\u89e3\u6790\u8f93\u5165"),(0,l.kt)("p",null,"\u6dfb\u52a0\u53c2\u6570\u5b9a\u4e49\u7684\u793a\u4f8b:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"use Toolkit\\PFlag\\Flag\\Argument;\nuse Toolkit\\PFlag\\FlagType;\n\n// add arguments\n// - quick add\n$fs->addArg('strArg1', 'the is string arg and is required', 'string', true);\n\n// - \u4f7f\u7528\u5b57\u7b26\u4e32\u89c4\u5219\u5feb\u901f\u6dfb\u52a0\u5b9a\u4e49\n$fs->addArgByRule('intArg2', 'int;this is a int arg and with default value;no;89');\n\n// - \u4f7f\u7528 Argument \u5bf9\u8c61\n$arg = Argument::new('arrArg');\n// OR $arg->setType(FlagType::ARRAY);\n$arg->setType(FlagType::STRINGS);\n$arg->setDesc(\"this is an array arg,\\n allow multi value,\\n must define at last\");\n\n$fs->addArgument($arg);\n")),(0,l.kt)("h3",{id:"\u89e3\u6790\u547d\u4ee4\u884c\u8f93\u5165"},"\u89e3\u6790\u547d\u4ee4\u884c\u8f93\u5165"),(0,l.kt)("p",null,"\u6700\u540e\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"parse()")," \u89e3\u6790\u547d\u4ee4\u884c\u8f93\u5165\u6570\u636e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"// ...\n\nif (!$fs->parse($flags)) {\n    // on render help\n    return;\n}\n\nvdump($fs->getOpts(), $fs->getArgs());\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u663e\u793a\u5e2e\u52a9")),(0,l.kt)("p",null,"\u5f53\u8f93\u5165 ",(0,l.kt)("inlineCode",{parentName:"p"},"-h")," \u6216 ",(0,l.kt)("inlineCode",{parentName:"p"},"--help")," \u4f1a\u81ea\u52a8\u6e32\u67d3\u5e2e\u52a9\u4fe1\u606f\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ php example/flags-demo.php --help\n")),(0,l.kt)("p",null,"Output:"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://github.com/php-toolkit/pflag/blob/main/example/images/flags-demo.png?raw=true",alt:"flags-demo"})),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u8fd0\u884c\u793a\u4f8b:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ php example/flags-demo.php --name inhere --age 99 --tag go -t php -t java -d one -f arg0 80 arr0 arr1\n")),(0,l.kt)("p",null,"\u8f93\u51fa\u7ed3\u679c:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'# \u9009\u9879\u6570\u636e\narray(6) {\n  ["str1"]=> string(6) "defVal"\n  ["name"]=> string(6) "inhere"\n  ["age"]=> int(99)\n  ["tag"]=> array(3) {\n    [0]=> string(2) "go"\n    [1]=> string(3) "php"\n    [2]=> string(4) "java"\n  }\n  ["name-is-very-lang"]=> string(3) "one"\n  ["f"]=> bool(true)\n}\n\n# \u53c2\u6570\u6570\u636e\narray(3) {\n  [0]=> string(4) "arg0"\n  [1]=> int(80)\n  [2]=> array(2) {\n    [0]=> string(4) "arr0"\n    [1]=> string(4) "arr1"\n  }\n}\n')),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"\u83b7\u53d6\u8f93\u5165\u503c"},"\u83b7\u53d6\u8f93\u5165\u503c"),(0,l.kt)("p",null,"\u83b7\u53d6flag\u503c\u5f88\u7b80\u5355\uff0c\u4f7f\u7528\u65b9\u6cd5 ",(0,l.kt)("inlineCode",{parentName:"p"},"getOpt(string $name)")," ",(0,l.kt)("inlineCode",{parentName:"p"},"getArg($nameOrIndex)")," \u5373\u53ef."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"TIP: \u5c06\u901a\u8fc7\u5b9a\u4e49\u7684\u6570\u636e\u7c7b\u578b\u81ea\u52a8\u683c\u5f0f\u5316\u8f93\u5165\u503c")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u9009\u9879\u6570\u636e")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"$force = $fs->getOpt('f'); // bool(true)\n$age  = $fs->getOpt('age'); // int(99)\n$name = $fs->getOpt('name'); // string(inhere)\n$tags = $fs->getOpt('tags'); // array{\"php\", \"go\", \"java\"}\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u53c2\u6570\u6570\u636e")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},'$arg0 = $fs->getArg(0); // string(arg0)\n// get an array arg\n$arrArg = $fs->getArg(1); // array{"arr0", "arr1"}\n// get value by name\n$arrArg = $fs->getArg(\'arrArg\'); // array{"arr0", "arr1"}\n')),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"\u6269\u5c55\u89c4\u5219\u5b9a\u4e49"},"\u6269\u5c55\uff1a\u89c4\u5219\u5b9a\u4e49"),(0,l.kt)("p",null,"\u9009\u9879\u53c2\u6570\u89c4\u5219\u3002\u4f7f\u7528\u89c4\u5219\u53ef\u4ee5\u5feb\u901f\u5b9a\u4e49\u4e00\u4e2a\u9009\u9879\u6216\u53c2\u6570\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"string \u5b57\u7b26\u4e32\u89c4\u5219\u4ee5\u5206\u53f7 ",(0,l.kt)("inlineCode",{parentName:"li"},";")," \u5206\u5272\u6bcf\u4e2a\u90e8\u5206 (\u5b8c\u6574\u89c4\u5219\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"type;desc;required;default;shorts"),")."),(0,l.kt)("li",{parentName:"ul"},"array \u89c4\u5219\u6309 ",(0,l.kt)("inlineCode",{parentName:"li"},"SFlags::DEFINE_ITEM")," \u8bbe\u7f6e\u5b9a\u4e49"),(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301\u7684\u7c7b\u578b\u5e38\u91cf\u8bf7\u770b ",(0,l.kt)("inlineCode",{parentName:"li"},"FlagType::*"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"use Toolkit\\PFlag\\FlagType;\n\n$rules = [\n     // v: \u53ea\u6709\u503c\uff0c\u4f5c\u4e3a\u540d\u79f0\u5e76\u4f7f\u7528\u9ed8\u8ba4\u7c7b\u578b FlagType::STRING\n     // k-v: \u952e\u662f\u540d\u79f0\uff0c\u503c\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32|\u6570\u7ec4\n     'long,s',\n     // name => rule\n     'long,a,b' => 'int;an int option', // long is option name, a and b is shorts.\n     'f'      => FlagType::BOOL,\n     'str1'   => ['type' => 'int', 'desc' => 'an string option'],\n     'tags'   => 'array; an array option', // can also: ints, strings\n     'name'   => 'type;the description message;required;default', // with desc, default, required\n]\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u5bf9\u4e8e\u9009\u9879")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u9009\u9879\u5141\u8bb8\u8bbe\u7f6e\u77ed\u540d\u79f0 ",(0,l.kt)("inlineCode",{parentName:"li"},"shorts"))),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"TIP: \u4f8b\u5982 ",(0,l.kt)("inlineCode",{parentName:"p"},"long,a,b")," - ",(0,l.kt)("inlineCode",{parentName:"p"},"long")," \u662f\u9009\u9879\u540d\u79f0. \u5269\u4f59\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"a,b")," \u90fd\u662f\u5b83\u7684\u77ed\u9009\u9879\u540d.")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u5bf9\u4e8e\u53c2\u6570")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u53c2\u6570\u6ca1\u6709\u522b\u540d\u6216\u8005\u77ed\u540d\u79f0"),(0,l.kt)("li",{parentName:"ul"},"\u6570\u7ec4\u53c2\u6570\u53ea\u5141\u8bb8\u5b9a\u4e49\u5728\u6700\u540e")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6570\u7ec4\u5b9a\u4e49\u9879")),(0,l.kt)("p",null,"\u5e38\u91cf ",(0,l.kt)("inlineCode",{parentName:"p"},"Flags::DEFINE_ITEM"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"public const DEFINE_ITEM = [\n    'name'      => '',\n    'desc'      => '',\n    'type'      => FlagType::STRING,\n    'helpType'  => '', // use for render help\n    // 'index'    => 0, // only for argument\n    'required'  => false,\n    'default'   => null,\n    'shorts'    => [], // only for option\n    // value validator\n    'validator' => null,\n    // 'category' => null\n];\n")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"\u81ea\u5b9a\u4e49\u8bbe\u7f6e"},"\u81ea\u5b9a\u4e49\u8bbe\u7f6e"),(0,l.kt)("h3",{id:"\u89e3\u6790\u8bbe\u7f6e"},"\u89e3\u6790\u8bbe\u7f6e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"    // -------------------- \u9009\u9879\u89e3\u6790\u8bbe\u7f6e --------------------\n\n    /**\n     * Stop parse option on found first argument.\n     *\n     * - Useful for support multi commands. eg: `top --opt ... sub --opt ...`\n     *\n     * @var bool\n     */\n    protected $stopOnFistArg = true;\n\n    /**\n     * Skip on found undefined option.\n     *\n     * - FALSE will throw FlagException error.\n     * - TRUE  will skip it and collect as raw arg, then continue parse next.\n     *\n     * @var bool\n     */\n    protected $skipOnUndefined = false;\n\n    // -------------------- \u53c2\u6570\u89e3\u6790\u8bbe\u7f6e --------------------\n\n    /**\n     * Whether auto bind remaining args after option parsed\n     *\n     * @var bool\n     */\n    protected $autoBindArgs = true;\n\n    /**\n     * Strict match args number.\n     * if exist unbind args, will throw FlagException\n     *\n     * @var bool\n     */\n    protected $strictMatchArgs = false;\n\n")),(0,l.kt)("h3",{id:"\u6e32\u67d3\u5e2e\u52a9\u8bbe\u7f6e"},"\u6e32\u67d3\u5e2e\u52a9\u8bbe\u7f6e"),(0,l.kt)("p",null,"support some settings for render help"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"\n    // -------------------- settings for built-in render help --------------------\n\n    /**\n     * \u81ea\u52a8\u6e32\u67d3\u5e2e\u52a9\u4fe1\u606f\u5f53\u8f93\u5165 '-h', '--help' \u9009\u9879\u65f6\n     *\n     * @var bool\n     */\n    protected $autoRenderHelp = true;\n\n    /**\n     * \u5728\u6e32\u67d3\u7684\u5e2e\u52a9\u4fe1\u606f\u4e0a\u663e\u793a\u6570\u636e\u7c7b\u578b\n     *\n     * if False:\n     *\n     * -o, --opt    Option desc\n     *\n     * if True:\n     *\n     * -o, --opt STRING   Option desc\n     *\n     * @var bool\n     */\n    protected $showTypeOnHelp = true;\n\n    /**\n     * \u5c06\u5728\u6253\u5370\u5e2e\u52a9\u6d88\u606f\u4e4b\u524d\u8c03\u7528\u5b83\n     *\n     * @var callable\n     */\n    private $beforePrintHelp;\n\n")),(0,l.kt)("p",null,"\u81ea\u5b9a\u4e49\u5e2e\u52a9\u6d88\u606f\u6e32\u67d3:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"$fs->setHelpRenderer(function (\\Toolkit\\PFlag\\FlagsParser $fs) {\n    // render help messages\n});\n")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"\u5355\u5143\u6d4b\u8bd5"},"\u5355\u5143\u6d4b\u8bd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"phpunit --debug\n")),(0,l.kt)("p",null,"test with coverage:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"phpdbg -qrr $(which phpunit) --coverage-text\n")),(0,l.kt)("h2",{id:"\u4f7f\u7528pflag\u7684\u9879\u76ee"},"\u4f7f\u7528pflag\u7684\u9879\u76ee"),(0,l.kt)("p",null,"\u8fd9\u4e9b\u9879\u76ee\u4f7f\u7528\u4e86 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/php-toolkit/pflag"},"https://github.com/php-toolkit/pflag")," :"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/inhere/console"},"inhere/console")," Full-featured php command line application library."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/inhere/kite"},"kite")," Kite is a tool for help development."),(0,l.kt)("li",{parentName:"ul"},"\u66f4\u591a\u7684\u8bf7\u770b ",(0,l.kt)("a",{parentName:"li",href:"https://packagist.org/packages/toolkit/pflag"},"Packagist"))),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Github \u4ed3\u5e93: ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/php-toolkit/pflag"},"php-toolkit/pflag"))))}m.isMDXComponent=!0}}]);