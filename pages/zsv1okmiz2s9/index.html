<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ZSH自动补全脚本编写 | Inhere&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="学习与随记。php,golang,git,github等技术学习">
    <meta name="keywords" content="个人技术博客,工具库文档站点,php,go,golang,docker,linux,git,github,markdown">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.f383d1fe.css" as="style"><link rel="preload" href="/assets/js/app.df00e40b.js" as="script"><link rel="preload" href="/assets/js/2.5fca87c7.js" as="script"><link rel="preload" href="/assets/js/67.06952968.js" as="script"><link rel="prefetch" href="/assets/js/10.1bf0f983.js"><link rel="prefetch" href="/assets/js/100.1879eef4.js"><link rel="prefetch" href="/assets/js/101.b685e199.js"><link rel="prefetch" href="/assets/js/102.b991501e.js"><link rel="prefetch" href="/assets/js/103.9b63473e.js"><link rel="prefetch" href="/assets/js/11.058e79d1.js"><link rel="prefetch" href="/assets/js/12.f73a2c19.js"><link rel="prefetch" href="/assets/js/13.28ede008.js"><link rel="prefetch" href="/assets/js/14.92520979.js"><link rel="prefetch" href="/assets/js/15.75fd650d.js"><link rel="prefetch" href="/assets/js/16.5056a849.js"><link rel="prefetch" href="/assets/js/17.19666740.js"><link rel="prefetch" href="/assets/js/18.16d529ae.js"><link rel="prefetch" href="/assets/js/19.252a7dc4.js"><link rel="prefetch" href="/assets/js/20.f51b4cc7.js"><link rel="prefetch" href="/assets/js/21.788596f8.js"><link rel="prefetch" href="/assets/js/22.81ec61b6.js"><link rel="prefetch" href="/assets/js/23.aa4eebd2.js"><link rel="prefetch" href="/assets/js/24.66121f6f.js"><link rel="prefetch" href="/assets/js/25.2e41f4cf.js"><link rel="prefetch" href="/assets/js/26.b9bbb914.js"><link rel="prefetch" href="/assets/js/27.b9001de8.js"><link rel="prefetch" href="/assets/js/28.395dfc42.js"><link rel="prefetch" href="/assets/js/29.d064c535.js"><link rel="prefetch" href="/assets/js/3.f0a817ee.js"><link rel="prefetch" href="/assets/js/30.fb0c25c1.js"><link rel="prefetch" href="/assets/js/31.1ddd392f.js"><link rel="prefetch" href="/assets/js/32.70911cdb.js"><link rel="prefetch" href="/assets/js/33.5876279a.js"><link rel="prefetch" href="/assets/js/34.ce3d9f42.js"><link rel="prefetch" href="/assets/js/35.86d5aec9.js"><link rel="prefetch" href="/assets/js/36.825504ce.js"><link rel="prefetch" href="/assets/js/37.460d57c1.js"><link rel="prefetch" href="/assets/js/38.8f956129.js"><link rel="prefetch" href="/assets/js/39.f4e103f8.js"><link rel="prefetch" href="/assets/js/4.743be5c5.js"><link rel="prefetch" href="/assets/js/40.66b97e08.js"><link rel="prefetch" href="/assets/js/41.32f6c74b.js"><link rel="prefetch" href="/assets/js/42.fa3b7632.js"><link rel="prefetch" href="/assets/js/43.f3af325d.js"><link rel="prefetch" href="/assets/js/44.ca32457e.js"><link rel="prefetch" href="/assets/js/45.0c6f1021.js"><link rel="prefetch" href="/assets/js/46.c37f6e75.js"><link rel="prefetch" href="/assets/js/47.0142c193.js"><link rel="prefetch" href="/assets/js/48.2a45baed.js"><link rel="prefetch" href="/assets/js/49.60327beb.js"><link rel="prefetch" href="/assets/js/5.30b47d6a.js"><link rel="prefetch" href="/assets/js/50.1ce75b20.js"><link rel="prefetch" href="/assets/js/51.4a8c8609.js"><link rel="prefetch" href="/assets/js/52.86ebed89.js"><link rel="prefetch" href="/assets/js/53.02b6d60f.js"><link rel="prefetch" href="/assets/js/54.f4f769ae.js"><link rel="prefetch" href="/assets/js/55.a7ce5911.js"><link rel="prefetch" href="/assets/js/56.5e36dc85.js"><link rel="prefetch" href="/assets/js/57.fc52250f.js"><link rel="prefetch" href="/assets/js/58.bf221e07.js"><link rel="prefetch" href="/assets/js/59.d1d1d6e0.js"><link rel="prefetch" href="/assets/js/6.dbe99396.js"><link rel="prefetch" href="/assets/js/60.28d15f50.js"><link rel="prefetch" href="/assets/js/61.78109df6.js"><link rel="prefetch" href="/assets/js/62.ae5e30e4.js"><link rel="prefetch" href="/assets/js/63.6111930a.js"><link rel="prefetch" href="/assets/js/64.edfa7307.js"><link rel="prefetch" href="/assets/js/65.25e8ca70.js"><link rel="prefetch" href="/assets/js/66.6333cdcb.js"><link rel="prefetch" href="/assets/js/68.576636a6.js"><link rel="prefetch" href="/assets/js/69.2364e169.js"><link rel="prefetch" href="/assets/js/7.4456a85e.js"><link rel="prefetch" href="/assets/js/70.701e4eac.js"><link rel="prefetch" href="/assets/js/71.3e87420c.js"><link rel="prefetch" href="/assets/js/72.f8c115ff.js"><link rel="prefetch" href="/assets/js/73.03253d39.js"><link rel="prefetch" href="/assets/js/74.573d6e26.js"><link rel="prefetch" href="/assets/js/75.f42f4218.js"><link rel="prefetch" href="/assets/js/76.c0ce81cb.js"><link rel="prefetch" href="/assets/js/77.269ec715.js"><link rel="prefetch" href="/assets/js/78.d4fccb70.js"><link rel="prefetch" href="/assets/js/79.b5c5ff98.js"><link rel="prefetch" href="/assets/js/8.8e8611c2.js"><link rel="prefetch" href="/assets/js/80.2981fec7.js"><link rel="prefetch" href="/assets/js/81.d82ee3d6.js"><link rel="prefetch" href="/assets/js/82.5ccd49ed.js"><link rel="prefetch" href="/assets/js/83.f14d34e6.js"><link rel="prefetch" href="/assets/js/84.58938fd8.js"><link rel="prefetch" href="/assets/js/85.932c13b1.js"><link rel="prefetch" href="/assets/js/86.aaed26f8.js"><link rel="prefetch" href="/assets/js/87.fc5d30b9.js"><link rel="prefetch" href="/assets/js/88.c77b1524.js"><link rel="prefetch" href="/assets/js/89.4199d0ea.js"><link rel="prefetch" href="/assets/js/9.df705f8f.js"><link rel="prefetch" href="/assets/js/90.a2c64e42.js"><link rel="prefetch" href="/assets/js/91.15cf8ce8.js"><link rel="prefetch" href="/assets/js/92.6289e6b2.js"><link rel="prefetch" href="/assets/js/93.4ab1b36c.js"><link rel="prefetch" href="/assets/js/94.f513ceb0.js"><link rel="prefetch" href="/assets/js/95.3198b780.js"><link rel="prefetch" href="/assets/js/96.ade73c74.js"><link rel="prefetch" href="/assets/js/97.2fe57d7d.js"><link rel="prefetch" href="/assets/js/98.6f880e08.js"><link rel="prefetch" href="/assets/js/99.dac5efc6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f383d1fe.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/inhere-s03.png" alt="Inhere's blog" class="logo"> <span class="site-name can-hide">Inhere's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/backend/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>PHP</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/6e5c5c/" class="nav-link">Example</a></li></ul></li><li class="dropdown-item"><!----> <a href="/golang/" class="nav-link">Golang</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Gookit" class="dropdown-title"><a href="/gookit/" class="link-title">Gookit</a> <span class="title" style="display:none;">Gookit</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8ee659/" class="nav-link">HTML</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><a href="/tool/" class="link-title">工具</a> <span class="title" style="display:none;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/zsv1okmiz2s9/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Linux工具</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><a href="/categories/" class="link-title">分类</a> <span class="title" style="display:none;">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li><li class="dropdown-item"><!----> <a href="/pages/eee83a9211a70f9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/pages/895daa/" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/pages/906e3nz5lw/" class="nav-link">在线书籍</a></li><li class="dropdown-item"><!----> <a href="/pages/12df8ace52d493f6/" class="nav-link">Vue资源</a></li></ul></div></div> <a href="https://github.com/inhere/inhere.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://avatars.githubusercontent.com/u/5302062?v=4"> <div class="blogger-info"><h3>Inhere</h3> <span>learning ... working</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/backend/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>PHP</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/6e5c5c/" class="nav-link">Example</a></li></ul></li><li class="dropdown-item"><!----> <a href="/golang/" class="nav-link">Golang</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Gookit" class="dropdown-title"><a href="/gookit/" class="link-title">Gookit</a> <span class="title" style="display:none;">Gookit</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8ee659/" class="nav-link">HTML</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><a href="/tool/" class="link-title">工具</a> <span class="title" style="display:none;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/zsv1okmiz2s9/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Linux工具</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><a href="/categories/" class="link-title">分类</a> <span class="title" style="display:none;">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li><li class="dropdown-item"><!----> <a href="/pages/eee83a9211a70f9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/pages/895daa/" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/pages/906e3nz5lw/" class="nav-link">在线书籍</a></li><li class="dropdown-item"><!----> <a href="/pages/12df8ace52d493f6/" class="nav-link">Vue资源</a></li></ul></div></div> <a href="https://github.com/inhere/inhere.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>技术文档</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>GitHub技巧</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>博客搭建</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>linux</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/943e51/" class="sidebar-link">在shell脚本里简单快速的使用颜色</a></li><li><a href="/pages/zsv1okmiz2s9/" aria-current="page" class="active sidebar-link">ZSH自动补全脚本编写</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/zsv1okmiz2s9/#编写自己的完成函数" class="sidebar-link">编写自己的完成函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/zsv1okmiz2s9/#实用功能" class="sidebar-link">实用功能</a></li><li class="sidebar-sub-header"><a href="/pages/zsv1okmiz2s9/#使用-describe-编写简单的完成函数" class="sidebar-link">使用 _describe 编写简单的完成函数</a></li><li class="sidebar-sub-header"><a href="/pages/zsv1okmiz2s9/#使用-alternative-编写完成函数" class="sidebar-link">使用 _alternative 编写完成函数</a></li><li class="sidebar-sub-header"><a href="/pages/zsv1okmiz2s9/#使用-arguments-编写完成函数" class="sidebar-link">使用 _arguments 编写完成函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/zsv1okmiz2s9/#测试与调试" class="sidebar-link">测试与调试</a></li><li class="sidebar-sub-header"><a href="/pages/zsv1okmiz2s9/#陷阱-注意事项" class="sidebar-link">陷阱（注意事项）</a></li><li class="sidebar-sub-header"><a href="/pages/zsv1okmiz2s9/#提示" class="sidebar-link">提示</a></li></ul></li><li><a href="/pages/0de8ik3i/" class="sidebar-link">学习编写bash命令自动补全</a></li><li><a href="/pages/raiu74h5/" class="sidebar-link">简单快速的配置自己的bash环境</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>editor</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>terminal</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/tool" title="tool-目录页" data-v-1cd794fe>tool</a></li> <li data-v-1cd794fe><a href="/tool/#linux" title="tool#linux" data-v-1cd794fe>linux</a></li> <!----></ul> <div class="info" data-v-1cd794fe><div title="作者" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/inhere" target="_blank" title="作者" class="beLink" data-v-1cd794fe>inhere</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2021-07-28</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          ZSH自动补全脚本编写
        </h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h1 id="zsh-自动补全脚本编写"><a href="#zsh-自动补全脚本编写" class="header-anchor">#</a> ZSH 自动补全脚本编写</h1> <p>告诉 zsh 使用哪个函数来完成命令</p> <p>命令的完成函数存储在名称以下划线 <code>_</code> 开头的文件中，这些文件应放置在 <code>$fpath</code> 变量中列出的目录中。您可以通过在 <code>~/.zshrc</code> 文件中添加这样的行来向 <code>$fpath</code> 添加目录：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">fpath</span><span class="token operator">=</span><span class="token punctuation">(</span>~/newdir <span class="token variable">$fpath</span> <span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>完成函数文件的第一行看起来像这样：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># compdef foobar</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这告诉 zsh 该文件包含用于完成 foobar 命令的代码。这是第一行最常使用的格式，但如果需要，您也可以使用相同的文件来完成多个不同的功能。
请参阅<a href="http://zsh.sourceforge.net/Doc/Release/Completion-System.html#Autoloaded-files" target="_blank" rel="noopener noreferrer">此处<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>了解更多详情。</p> <p>你也可以直接使用 <code>compdef</code> 命令（例如在你的 <code>~/.zshrc</code> 文件中）告诉 zsh 使用哪个函数来完成这样的命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> compdef _function foobar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或者对几个命令使用相同的完成：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> compdef _function foobar goocar hoodar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或者如果你想提供参数：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> compdef <span class="token string">' _function arg1 arg2 '</span> foobar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>请参<a href="http://zsh.sourceforge.net/Doc/Release/Completion-System.html#Functions-4" target="_blank" rel="noopener noreferrer">阅此<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>处了解更多详情。</p> <h2 id="编写自己的完成函数"><a href="#编写自己的完成函数" class="header-anchor">#</a> 编写自己的完成函数</h2> <p>一个很好的入门方法是查看一些已经定义的完成函数。在我的 linux 安装中，这些可以在 <code>/usr/share/zsh/functions/Completion/Unix</code> 和 <code>/usr/share/zsh/functions/Completion/Linux</code> 和其他一些子目录中找到。</p> <p>您会注意到 <code>_arguments</code> 函数在这些文件中被大量使用。这是一个实用函数，可以轻松编写简单的完成函数。<code>_arguments</code> 函数是 <code>compadd</code> 内置函数的包装器。<code>compadd</code> 内置函数是用于向命令行添加完成词并控制其行为的核心函数。
但是，大多数情况下您不需要使用 <code>compadd</code>，因为有许多实用函数，例如 <code>_arguments</code> 和 <code>_describe</code>，它们更易于使用。</p> <p>对于非常基本的完成，<code>_describe</code> 函数应该足够了</p> <h3 id="实用功能"><a href="#实用功能" class="header-anchor">#</a> 实用功能</h3> <p>以下是一些可能有用的实用函数的列表。实用功能的完整列表以及完整的解释可在此处获得。下一节将给出如何使用这些函数的示例。</p> <p><strong>整体完成的主要实用功能</strong></p> <table><thead><tr><th>函数</th> <th>说明</th></tr></thead> <tbody><tr><td><code>_alternative</code></td> <td>可用于从其他实用程序函数或 shell 代码生成完成候选。</td></tr> <tr><td><code>_arguments</code></td> <td>用于指定如何完成带有 unix 样式选项的命令的单个选项和参数。</td></tr> <tr><td><code>_describe</code></td> <td>用于创建由带有描述（但没有动作 <code>ACTION</code>）的单词组成的简单完成。比 <code>_arguments</code> 更容易使用</td></tr> <tr><td><code>_gnu_generic</code></td> <td>可用于完成理解 <code>--help</code> 选项的命令的选项。</td></tr> <tr><td><code>_regex_arguments</code></td> <td>创建一个函数，用于将命令行参数与正则表达式匹配，然后执行操作/完成。</td></tr></tbody></table> <p><strong>用于执行单个单词的复杂完成的函数</strong></p> <table><thead><tr><th>函数</th> <th>说明</th></tr></thead> <tbody><tr><td><code>_values</code></td> <td>用于完成任意关键字（值）及其参数，或此类组合的逗号分隔列表。</td></tr> <tr><td><code>_combination</code></td> <td>用于完成值的组合，例如主机名和用户名对。</td></tr> <tr><td><code>_multi_parts</code></td> <td>用于分别完成单词的多个部分，其中每个部分由一些字符分隔，例如用于完成部分文件路径：<code>/u/i/sy -&gt; /usr/include/sys</code></td></tr> <tr><td><code>_sep_parts</code></td> <td>与 _multi_parts 类似，但允许在完成的不同部分使用不同的分隔符。</td></tr> <tr><td><code>_sequence</code></td> <td>用作另一个完成函数的包装器，以完成由该其他函数生成的分隔匹配列表。</td></tr></tbody></table> <p><strong>用于完成特定类型对象的函数</strong></p> <table><thead><tr><th>函数</th> <th>说明</th></tr></thead> <tbody><tr><td><code>_path_files</code></td> <td>用于完成文件路径。采取多种选择来控制行为。</td></tr> <tr><td><code>_files</code></td> <td>使用除 <code>-g</code> 和 <code>-/</code> 之外的所有选项调用 <code>_path_files</code>。这些选项取决于文件模式样式设置。</td></tr> <tr><td><code>_net_interfaces</code></td> <td>用于补全网络接口名称</td></tr> <tr><td><code>_users</code></td> <td>用于填写用户名</td></tr> <tr><td><code>_groups</code></td> <td>用于完成组名</td></tr> <tr><td><code>_options</code></td> <td>用于补全 shell 选项的名称。</td></tr> <tr><td><code>_parameters</code></td> <td>用于完成 shell 参数/变量的名称（可以限制为匹配模式的那些）</td></tr></tbody></table> <p><strong>处理缓存完成的函数</strong></p> <p>如果您有大量完成，您可以将它们保存在缓存文件中，以便快速加载完成。</p> <table><thead><tr><th>函数</th> <th>说明</th></tr></thead> <tbody><tr><td><code>_cache_invalid</code></td> <td>指示与给定缓存标识符对应的完成缓存是否需要重建</td></tr> <tr><td><code>_retrieve_cache</code></td> <td>从缓存文件中检索完成信息</td></tr> <tr><td><code>_store_cache</code></td> <td>在缓存文件中存储与给定缓存标识符相对应的完成</td></tr></tbody></table> <p><strong>其他功能</strong></p> <table><thead><tr><th>函数</th> <th>说明</th></tr></thead> <tbody><tr><td><code>_message</code></td> <td>用于在无法生成完成的地方显示帮助消息。</td></tr> <tr><td><code>_regex_words</code></td> <td>可用于为 <code>_regex_arguments</code> 命令生成参数。这比手动编写参数更容易。</td></tr> <tr><td><code>_guard</code></td> <td>可用于 <code>_arguments</code> 的规范的 <code>ACTION</code> 和类似函数来检查正在完成的单词。</td></tr></tbody></table> <p><strong>动作 Action</strong></p> <p>许多实用函数，例如 <code>_arguments</code> <code>_regex_arguments</code> <code>_alternative</code> 和 <code>_values</code> 可能在选项/参数规范的末尾包含一个动作。此动作指示如何完成相应的参数。动作 <code>Action</code> 可以采用以下形式之一：</p> <table><thead><tr><th>函数</th> <th>说明</th></tr></thead> <tbody><tr><td><code>()</code></td> <td>需要参数，但不会生成匹配项。</td></tr> <tr><td><code>(ITEM1 ITEM2)</code></td> <td>可能匹配项列表</td></tr> <tr><td><code>((ITEM1\:'DESC1' ITEM2\:'DESC2'))</code></td> <td>可能的匹配列表，附带描述信息。注意：Action 中的引号不能和其所在的参数格式字符串的引号相同</td></tr> <tr><td><code>-&gt;STRING</code></td> <td>将<code>$state</code>设置为字符串并继续（<code>$state</code>可在实用功能调用后在案例陈述中检查）</td></tr> <tr><td><code>FUNCTION</code></td> <td>用于生成匹配或执行某些其他操作的函数名称. 例如 <code>_files</code> 或 <code>_message</code></td></tr> <tr><td><code>{EVAL-STRING}</code></td> <td>将字符串评估为 shell 代码以生成匹配项。这可用于调用带有参数的实用程序函数，例如 <code>_values</code> 或 <code>_describe</code></td></tr> <tr><td><code>=ACTION</code></td> <td>在完成命令行中插入一个虚拟词而且不会改变补全位置节点</td></tr></tbody></table> <p>并非所有操作类型都可用于使用它们的所有实用功能。例如，-&gt;string 类型在_regex_arguments或_alternative功能中不可用。</p> <h3 id="使用-describe-编写简单的完成函数"><a href="#使用-describe-编写简单的完成函数" class="header-anchor">#</a> 使用 _describe 编写简单的完成函数</h3> <p><code>_describe</code> 函数可用于简单的补全，其中选项/参数的顺序和位置并不重要。您只需要创建一个数组参数来保存选项及其描述，然后将参数名称作为参数传递给 <code>_describe</code>。下面的示例创建完成候选 c 和 d，以及描述（注意这应该放在 <code>$fpath</code> 中列出的某个目录中名为 <code>_cmd</code> 的文件中）。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#compdef cmd</span>
<span class="token builtin class-name">local</span> -a subcmds
<span class="token assign-left variable">subcmds</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'c:description for c command'</span> <span class="token string">'d:description for d command'</span><span class="token punctuation">)</span>
_describe <span class="token string">'command'</span> subcmds
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>您可以使用以下由双连字符分隔的多个不同列表，但请注意，这混合了单个标题下的匹配项，并且不打算与不同类型的完成候选者一起使用：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">local</span> -a subcmds topics
<span class="token assign-left variable">subcmds</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'c:description for c command'</span> <span class="token string">'d:description for d command'</span><span class="token punctuation">)</span>
<span class="token assign-left variable">topics</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'e:description for e help topic'</span> <span class="token string">'f:description for f help topic'</span><span class="token punctuation">)</span>
_describe <span class="token string">'command'</span> subcmds -- topics

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>如果两个候选人有相同的描述，<code>_describe</code> 将它们收集在同一行中，并确保描述在列中整齐对齐。<code>_describe</code> 函数可以在 <code>ACTION</code> 中用作 <code>_alternative</code>、<code>_arguments</code> 或 <code>_regex_arguments</code> 规范的一部分。在这种情况下，您必须将它的参数放在大括号中，例如 <code>'TAG:DESCRIPTION:{_describe 'values' options}'</code></p> <h3 id="使用-alternative-编写完成函数"><a href="#使用-alternative-编写完成函数" class="header-anchor">#</a> 使用 _alternative 编写完成函数</h3> <p>与 <code>_describe</code> 一样，此函数执行简单的补全，其中选项/参数的顺序和位置并不重要。然而，与 _describe 不同的是，可以调用其他函数而不是固定匹配来生成完成候选。此外，_alternative 允许混合不同类型的完成候选。</p> <p>作为参数，它采用 <code>'TAG:DESCRIPTION:ACTION'</code> 形式的规范列表，其中 TAG 是标识完成匹配类型的特殊标签，DESCRIPTION 用作标题来共同描述完成候选组，而 ACTION是前面列出的动作类型之一（除了 <code>-&gt;STRING</code> 和 <code>=ACTION</code> 形式）。例如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>_alternative <span class="token string">'arguments:custom arg:(a b c)'</span> <span class="token string">'files:filename:_files'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>第一个规范添加完成候选 a、b 和 c，第二个规范调用 <code>_files</code> 函数来完成文件路径。</p> <p>我们可以用 <code>\</code> 将规范分成几行，并为每个自定义参数添加描述，如下所示：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>_alternative <span class="token punctuation">\</span>
  <span class="token string">'args:custom arg:((a\:&quot;description a&quot; b\:&quot;description b&quot; c\:&quot;description c&quot;))'</span> <span class="token punctuation">\</span>
  <span class="token string">'files:filename:_files'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果我们想将参数传递给 <code>_files</code>，它们可以简单地包含在内，如下所示：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>_alternative <span class="token punctuation">\</span>
  <span class="token string">'args:custom arg:((a\:&quot;description a&quot; b\:&quot;description b&quot; c\:&quot;description c&quot;))'</span><span class="token punctuation">\</span>
  <span class="token string">'files:filename:_files -/'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>要使用参数扩展来创建我们的完成列表，我们必须使用双引号来引用规范，例如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>_alternative <span class="token punctuation">\</span>
  <span class="token string">&quot;dirs:user directory:(<span class="token variable">$userdirs</span>)&quot;</span> <span class="token punctuation">\</span>
  <span class="token string">&quot;pids:process ID:(<span class="token variable"><span class="token variable">$(</span><span class="token function">ps</span> -A o <span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token variable">)</span></span>)&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在这种情况下，第一个规范添加存储在 <code>$userdirs</code> 变量中的单词，第二个规范评估 <code>'ps -A o pid='</code> 以获取用作完成候选的 pid 列表。在实践中，我们会为此使用现有的 <code>_pids</code> 函数。</p> <p>我们可以使用其他实用函数，例如 ACTION 中的 <code>_values</code> 来执行更复杂的完成，例如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>_alternative <span class="token punctuation">\</span>
  <span class="token string">&quot;directories:user directory:(<span class="token variable">$userdirs</span>)&quot;</span> <span class="token punctuation">\</span>
  <span class="token string">'options:comma-separated opt: _values -s , letter a b c'</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这将完成 <code>$userdirs</code> 中的项目，以及包含 <code>a, b &amp;/or c</code> 的逗号分隔列表。注意 <code>_values</code> 之前的初始空格的使用。这是必需的，因为 <code>_values</code> 不理解用于描述的标准 compadd 选项。</p> <p>与 <code>_describe</code> 一样，<code>_alternative</code> 函数本身可以作为 <code>_arguments</code> 或 <code>_regex_arguments</code> 规范的一部分在 <code>ACTION</code> 中使用。</p> <h3 id="使用-arguments-编写完成函数"><a href="#使用-arguments-编写完成函数" class="header-anchor">#</a> 使用 _arguments 编写完成函数</h3> <p>通过对 _arguments 函数的一次调用，您可以创建相当复杂的完成函数。它旨在处理带有各种选项和一些普通参数的典型命令。与 _alternative 函数一样，_arguments 将规范字符串列表作为参数。这些规范字符串指定选项和任何相应的选项参数（例如 -f 文件名）或命令参数。</p> <p>基本选项规范采用 <code>'-OPT[DESCRIPTION]'</code> 的形式，例如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># sort output: 排序输出</span>
<span class="token comment"># long output: 长输出</span>
_arguments <span class="token string">'-s[sort output]'</span> <span class="token string">'--l[long output]'</span> <span class="token string">'-l[long output]'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>可以在 <code>'-OPT[DESCRIPTION]:MESSAGE:ACTION'</code> 形式的选项描述之后指定选项的参数，其中 MESSAGE 是要显示的消息，而 ACTION 可以是上面 ACTIONS 部分中提到的任何形式。例如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>_arguments <span class="token string">'-f[input file]:filename:_files'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>命令参数规范采用 <code>'N:MESSAGE:ACTION'</code> 形式，其中 <code>N</code> 表示它是第 <code>N</code> 个命令参数，而 <code>MESSAGE &amp; ACTION</code> 和以前一样。如果省略 N，则它仅表示下一个命令参数（在任何已指定的参数之后）。如果在开头（在 <code>N</code> 之后）使用 <em>双冒号</em>，则该参数是可选的。例如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>_arguments <span class="token string">'-s[sort output]'</span> <span class="token string">'1:first arg:_net_interfaces'</span> <span class="token string">'::optional arg:_files'</span> <span class="token string">':next arg:(a b c)'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这里第一个 arg 是网络接口，下一个可选 <code>arg</code> 是文件名，最后一个 <code>arg</code> 可以是 a、b 或 c，并且 <code>-s</code> 选项可以在任何位置完成。</p> <p><code>_arguments</code> 函数允许使用上面 <code>ACTION</code> 部分中列出的全套 ACTION 表单。这意味着您可以使用操作来选择 <code>case</code> 语句分支，如下所示：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>_arguments <span class="token string">'-m[music file]:filename:-&gt;files'</span> <span class="token string">'-f[flags]:flag:-&gt;flags'</span>
<span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$state</span>&quot;</span> <span class="token keyword">in</span>
    files<span class="token punctuation">)</span>
        <span class="token builtin class-name">local</span> -a music_files
        <span class="token assign-left variable">music_files</span><span class="token operator">=</span><span class="token punctuation">(</span> Music/**/*.<span class="token punctuation">{</span>mp3,wav,flac,ogg<span class="token punctuation">}</span> <span class="token punctuation">)</span>
        _multi_parts / music_files
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    flags<span class="token punctuation">)</span>
        _values -s , <span class="token string">'flags'</span> a b c d e
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>在这种情况下，音乐文件(music_files)的路径使用 <code>_multi_parts</code> 函数逐步降序完成，标志使用 <code>_values</code> 函数作为逗号分隔的列表完成。</p> <p>我这里刚刚给你介绍了 <code>_arguments</code> 规范的基础知识，你还可以指定互斥选项、重复选项&amp;参数、以+开头的选项而不是-等，更多细节参见<a href="http://zsh.sourceforge.net/Doc/Release/Completion-System.html#Completion-System" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。
另请查看本文档末尾提到的教程，以及<a href="https://github.com/vapniks/zsh-completions/tree/master/src" target="_blank" rel="noopener noreferrer">src 目录<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中的完成功能。</p> <h2 id="测试与调试"><a href="#测试与调试" class="header-anchor">#</a> 测试与调试</h2> <p>要重新加载完成功能：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> unfunction _func
<span class="token operator">&gt;</span> autoload -U _func
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>可以调用以下函数来获取有用的信息。如果默认键绑定不起作用，您可以尝试按 <code>Alt+x</code>，然后输入命令名称。</p> <table><thead><tr><th>功能</th> <th>默认键绑定</th> <th>描述</th></tr></thead> <tbody><tr><td><code>_complete_help</code></td> <td><code>Ctrl+xh</code></td> <td>显示有关在当前光标位置完成时使用的上下文名称、标签和完成函数的信息</td></tr> <tr><td><code>_complete_help</code></td> <td><code>Alt+2 Ctrl+xh</code></td> <td>如上所述，但显示更多信息</td></tr> <tr><td><code>_complete_debug</code></td> <td><code>Ctrl+x ?</code></td> <td>执行普通完成，但在临时文件中捕获完成系统执行的 shell 命令的跟踪</td></tr></tbody></table> <h2 id="陷阱-注意事项"><a href="#陷阱-注意事项" class="header-anchor">#</a> 陷阱（注意事项）</h2> <p>请记住在包含完成函数的文件的开头包含 <code>#compdef</code> 行。</p> <p>注意对 <code>_arguments</code> 或 <code>_regex_arguments</code> 的规范使用正确的引用类型：如果规范中存在需要扩展的参数，请使用双引号，否则使用单引号，并确保在项目描述周围使用不同的引号。</p> <p>检查您在 <code>_arguments</code> 、<code>_alternative</code> 、 <code>_regex_arguments</code> 等规范的正确位置是否有正确数量的 <code>:</code>。</p> <p>记住在使用 <code>_regex_arguments</code> 时包含一个初始模式来匹配命令词（它不需要匹配操作）。</p> <p>请记住在 <code>_regex_arguments</code> 的任何 <code>PATTERN</code> 参数的末尾放置一个空字符 <code>$'\0'</code></p> <h2 id="提示"><a href="#提示" class="header-anchor">#</a> 提示</h2> <p>有时你会遇到这样的情况，在子命令之后只有一个选项，当在子命令之后按下 tab 时，zsh 会自动完成这个。相反，如果您希望在完成之前将其与其描述一起列出，您可以向 <code>ACTION</code> 添加另一个空选项（即 <code>\:</code>），如下所示 <code>':TAG:DESCRIPTION:((opt1\:”description for opt1” \:))'</code> 请注意这一点仅适用于在其规范参数（<code>_arguments</code>、<code>_regex_arguments</code> 等）中使用 <code>ACTION</code> 的实用程序函数</p> <blockquote><p>本文翻译自 <a href="https://github.com/zsh-users/zsh-completions/blob/master/zsh-completions-howto.org" target="_blank" rel="noopener noreferrer">zsh-users/zsh-completions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <blockquote><p>TIP: 更完整的翻译文章参看 http://chuquan.me/2020/10/02/zsh-completion-tutorial/</p></blockquote></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/inhere/inhere.github.io/edit/master/docs/03.tool/08.linux/02.zsh-completions-howto.md" target="_blank" rel="noopener noreferrer">Edit</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=shell" title="标签">#shell</a><a href="/tags/?tag=zsh" title="标签">#zsh</a><a href="/tags/?tag=linux" title="标签">#linux</a></div> <div class="last-updated"><span class="prefix">Last Update:</span> <span class="time">2021/08/08, 16:27:41</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/943e51/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">在shell脚本里简单快速的使用颜色</div></a> <a href="/pages/0de8ik3i/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">学习编写bash命令自动补全</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/943e51/" class="prev">在shell脚本里简单快速的使用颜色</a></span> <span class="next"><a href="/pages/0de8ik3i/">学习编写bash命令自动补全</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/raiu74h5/"><div>简单快速的配置自己的bash环境</div></a> <span>08-08</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/0de8ik3i/"><div>学习编写bash命令自动补全</div></a> <span>08-08</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/1a2a87/"><div>readme</div></a> <span>05-16</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:in.798@qq.com" title="Send Email" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/inhere" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://github.com/inhere" title="Gitee" target="_blank" class="iconfont icon-gitee"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2021
    <span>Inhere | <a href="https://github.com/inhere/inhere.github.io/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><i class="close-but">×</i> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.df00e40b.js" defer></script><script src="/assets/js/2.5fca87c7.js" defer></script><script src="/assets/js/67.06952968.js" defer></script>
  </body>
</html>