<!doctype html><html lang=zh-Hans><head><meta charset=UTF-8><meta content="default-src 'self';font-src 'self' data:;img-src 'self' https://* data:;media-src 'self';style-src 'self';frame-src player.vimeo.com https://www.youtube-nocookie.com;connect-src 'self';script-src 'self' 'self'" http-equiv=Content-Security-Policy><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://inhere.github.io name=base><title>
Inhere's Site â€¢ linux å‘½ä»¤ sed è¯¦è§£</title><link href=https://inhere.github.io/icons/favicon.ico rel=icon type=image/png><link title="Inhere's Site - Atom Feed" href=https://inhere.github.io/atom.xml rel=alternate type=application/atom+xml><link href="https://inhere.github.io/custom_subset.css?h=0b9535a28bc3d5bf2321" rel=stylesheet><link href="https://inhere.github.io/main.css?h=045c365e19a4d50a64bb" rel=stylesheet><link href="https://inhere.github.io/custom.css?h=b0b090835487d694b863" rel=stylesheet><link href="https://inhere.github.io/skins/blue.css?h=a4dc1e94d3f5759784d2" rel=stylesheet><meta content="light dark" name=color-scheme><meta content="sedæ˜¯stream editorçš„ç®€ç§°ï¼Œä¹Ÿå°±æ˜¯æµç¼–è¾‘å™¨ã€‚
å®ƒä¸€æ¬¡å¤„ç†ä¸€è¡Œå†…å®¹ï¼Œå¤„ç†æ—¶ï¼ŒæŠŠå½“å‰å¤„ç†çš„è¡Œå­˜å‚¨åœ¨ä¸´æ—¶ç¼“å†²åŒºä¸­ï¼Œç§°ä¸ºâ€œæ¨¡å¼ç©ºé—´â€ï¼ˆpattern spaceï¼‰ï¼Œ
æ¥ç€ç”¨sedå‘½ä»¤å¤„ç†ç¼“å†²åŒºä¸­çš„å†…å®¹ï¼Œå¤„ç†å®Œæˆåï¼ŒæŠŠç¼“å†²åŒºçš„å†…å®¹é€å¾€å±å¹•ã€‚
æ¥ç€å¤„ç†ä¸‹ä¸€è¡Œï¼Œè¿™æ ·ä¸æ–­é‡å¤ï¼Œç›´åˆ°æ–‡ä»¶æœ«å°¾ã€‚â€¦" name=description><meta content="sedæ˜¯stream editorçš„ç®€ç§°ï¼Œä¹Ÿå°±æ˜¯æµç¼–è¾‘å™¨ã€‚
å®ƒä¸€æ¬¡å¤„ç†ä¸€è¡Œå†…å®¹ï¼Œå¤„ç†æ—¶ï¼ŒæŠŠå½“å‰å¤„ç†çš„è¡Œå­˜å‚¨åœ¨ä¸´æ—¶ç¼“å†²åŒºä¸­ï¼Œç§°ä¸ºâ€œæ¨¡å¼ç©ºé—´â€ï¼ˆpattern spaceï¼‰ï¼Œ
æ¥ç€ç”¨sedå‘½ä»¤å¤„ç†ç¼“å†²åŒºä¸­çš„å†…å®¹ï¼Œå¤„ç†å®Œæˆåï¼ŒæŠŠç¼“å†²åŒºçš„å†…å®¹é€å¾€å±å¹•ã€‚
æ¥ç€å¤„ç†ä¸‹ä¸€è¡Œï¼Œè¿™æ ·ä¸æ–­é‡å¤ï¼Œç›´åˆ°æ–‡ä»¶æœ«å°¾ã€‚â€¦" property=og:description><meta content="linux å‘½ä»¤ sed è¯¦è§£" property=og:title><meta content=article property=og:type><meta content=zh_CN property=og:locale><meta content=https://inhere.github.io/blog/2016/sec-command-usage-in-linux/ property=og:url><meta content="Inhere's Site" property=og:site_name><noscript><link href=https://inhere.github.io/no_js.css rel=stylesheet></noscript><script src=https://inhere.github.io/js/initializeTheme.min.js></script><script defer src=https://inhere.github.io/js/themeSwitcher.min.js></script><body><a href=#main-content id=skip-link>è·³åˆ°å†…å®¹</a><header><nav class=navbar><div class=nav-title><a class=home-title href=https://inhere.github.io/>Inhere's Site</a></div><div class=nav-navs><ul><li><a class="nav-links no-hover-padding" href=https://inhere.github.io/blog/>ğŸ“ Blog </a><li><a class="nav-links no-hover-padding" href=https://inhere.github.io/projects/>ğŸš€ Projects </a><li><a class="nav-links no-hover-padding" href=https://inhere.github.io/collections/>ğŸ“š Collections </a><li><a class="nav-links no-hover-padding" href=https://inhere.github.io/tags/>ğŸ·ï¸ Tags </a><li><a class="nav-links no-hover-padding" href=https://inhere.github.io/archive/>ğŸ—„ï¸ Archive </a><li><a class="nav-links no-hover-padding" href=https://github.com/inhere>ğŸ± Github </a><li class=menu-icons-container><ul class=menu-icons-group><li class="theme-switcher-wrapper js"><div aria-label=åˆ‡æ¢åˆ°æš—æ¨¡å¼ aria-pressed=false class=theme-switcher role=button tabindex=0 title=åˆ‡æ¢åˆ°æš—/äº®æ¨¡å¼></div><div class="theme-resetter arrow" aria-hidden=true aria-label=å°†æ¨¡å¼é‡ç½®ä¸ºç½‘ç«™é»˜è®¤å€¼ role=button tabindex=0 title=å°†æ¨¡å¼é‡ç½®ä¸ºç½‘ç«™é»˜è®¤å€¼></div></ul></ul></div></nav></header><div class=content id=main-content><main><article class=h-entry><h1 class="p-name article-title">linux å‘½ä»¤ sed è¯¦è§£</h1><a class="u-url u-uid" href=https://inhere.github.io/blog/2016/sec-command-usage-in-linux/></a><ul class=meta><li>ç”±<span class=p-author>inhere</span>å’Œ<span class=p-author>network</span><li><time class=dt-published datetime=2016-09-17T11:28:34><span aria-hidden=true class=separator>â€¢</span>17 9æœˆ 2016</time><li title="1498 å­—"><span aria-hidden=true class=separator>â€¢</span>8 åˆ†é’Ÿé˜…è¯»<li class=tag><span aria-hidden=true class=separator>â€¢</span>æ ‡ç­¾:Â <li class=tag><a class=p-category href=https://inhere.github.io/tags/linux/>linux</a>,Â <li class=tag><a class=p-category href=https://inhere.github.io/tags/sed/>sed</a>,Â <li class=tag><a class=p-category href=https://inhere.github.io/tags/tools/>tools</a></ul><section class="e-content body"><p>sedæ˜¯stream editorçš„ç®€ç§°ï¼Œä¹Ÿå°±æ˜¯æµç¼–è¾‘å™¨ã€‚ å®ƒä¸€æ¬¡å¤„ç†ä¸€è¡Œå†…å®¹ï¼Œå¤„ç†æ—¶ï¼ŒæŠŠå½“å‰å¤„ç†çš„è¡Œå­˜å‚¨åœ¨ä¸´æ—¶ç¼“å†²åŒºä¸­ï¼Œç§°ä¸ºâ€œæ¨¡å¼ç©ºé—´â€ï¼ˆpattern spaceï¼‰ï¼Œ æ¥ç€ç”¨sedå‘½ä»¤å¤„ç†ç¼“å†²åŒºä¸­çš„å†…å®¹ï¼Œå¤„ç†å®Œæˆåï¼ŒæŠŠç¼“å†²åŒºçš„å†…å®¹é€å¾€å±å¹•ã€‚ æ¥ç€å¤„ç†ä¸‹ä¸€è¡Œï¼Œè¿™æ ·ä¸æ–­é‡å¤ï¼Œç›´åˆ°æ–‡ä»¶æœ«å°¾ã€‚</p><span id=continue-reading></span><blockquote><p>TIP: æ–‡ä»¶å†…å®¹å¹¶æ²¡æœ‰æ”¹å˜ï¼Œé™¤éä½ ä½¿ç”¨é‡å®šå‘å­˜å‚¨è¾“å‡ºæˆ–è€…åŠ äº†é€‰é¡¹ <code>-i</code></blockquote><h2 id=shi-yong-yu-fa><a aria-label="Anchor link for: shi-yong-yu-fa" class="header-anchor no-hover-padding" href=#shi-yong-yu-fa><span aria-hidden=true class=link-icon></span></a> ä½¿ç”¨è¯­æ³•</h2><p>sedå‘½ä»¤çš„ä½¿ç”¨è§„åˆ™æ˜¯è¿™æ ·çš„ï¼š<pre class=z-code><code><span class="z-text z-plain">sed [option] 'command' input_file
</span></code></pre><p>å…¶ä¸­optionæ˜¯å¯é€‰çš„ï¼Œå¸¸ç”¨çš„optionæœ‰å¦‚ä¸‹å‡ ç§ï¼š<ul><li><code>-n</code> ä½¿ç”¨å®‰é™(silent)æ¨¡å¼ã€‚åœ¨ä¸€èˆ¬sedçš„ç”¨æ³•ä¸­ï¼Œæ‰€æœ‰æ¥è‡ªstdinçš„å†…å®¹ä¸€èˆ¬éƒ½ä¼šè¢«åˆ—å‡ºåˆ°å±å¹•ä¸Šã€‚ä½†å¦‚æœåŠ ä¸Š<code>-n</code>å‚æ•°åï¼Œåˆ™åªæœ‰ç»è¿‡sedç‰¹æ®Šå¤„ç†çš„é‚£ä¸€è¡Œ(æˆ–è€…åŠ¨ä½œ)æ‰ä¼šè¢«åˆ—å‡ºæ¥ï¼›<li><code>-e</code> ç›´æ¥åœ¨æŒ‡ä»¤åˆ—æ¨¡å¼ä¸Šè¿›è¡Œ sed çš„åŠ¨ä½œç¼–è¾‘ï¼›<li><code>-f</code> ç›´æ¥å°† sed çš„åŠ¨ä½œå†™åœ¨ä¸€ä¸ªæ–‡ä»¶å†…ï¼Œ <code>-f filename</code> åˆ™å¯ä»¥æ‰§è¡Œfilenameå†…çš„sedå‘½ä»¤ï¼›<li><code>-r</code> è®©sedå‘½ä»¤æ”¯æŒæ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼(é»˜è®¤æ˜¯åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼)ï¼›<li><code>-i</code> ç›´æ¥ä¿®æ”¹è¯»å–çš„æ–‡ä»¶å†…å®¹ï¼Œè€Œä¸æ˜¯ç”±å±å¹•è¾“å‡ºã€‚</ul><p>å¸¸ç”¨çš„å‘½ä»¤æœ‰ä»¥ä¸‹å‡ ç§ï¼š<ul><li><code>a</code> appendå³è¿½åŠ å­—ç¬¦ä¸²ï¼Œ a çš„åé¢è·Ÿä¸Šå­—ç¬¦ä¸²s(å¤šè¡Œå­—ç¬¦ä¸²å¯ä»¥ç”¨<code>\n</code>åˆ†éš”)ï¼Œåˆ™ä¼šåœ¨å½“å‰é€‰æ‹©çš„è¡Œçš„åé¢éƒ½åŠ ä¸Šå­—ç¬¦ä¸²sï¼›<li><code>c</code> å–ä»£/æ›¿æ¢å­—ç¬¦ä¸²ï¼Œc åé¢è·Ÿä¸Šå­—ç¬¦ä¸²s(å¤šè¡Œå­—ç¬¦ä¸²å¯ä»¥ç”¨<code>\n</code>åˆ†éš”)ï¼Œåˆ™ä¼šå°†å½“å‰é€‰ä¸­çš„è¡Œæ›¿æ¢æˆå­—ç¬¦ä¸²sï¼›<li><code>d</code> deleteå³åˆ é™¤ï¼Œè¯¥å‘½ä»¤ä¼šå°†å½“å‰é€‰ä¸­çš„è¡Œåˆ é™¤ï¼›<li><code>i</code> insertå³æ’å…¥å­—ç¬¦ä¸²ï¼Œi åé¢è·Ÿä¸Šå­—ç¬¦ä¸²s(å¤šè¡Œå­—ç¬¦ä¸²å¯ä»¥ç”¨<code>\n</code>åˆ†éš”)ï¼Œåˆ™ä¼šåœ¨å½“å‰é€‰ä¸­çš„è¡Œçš„å‰é¢éƒ½æ’å…¥å­—ç¬¦ä¸²sï¼›<li><code>p</code> printå³æ‰“å°ï¼Œè¯¥å‘½ä»¤ä¼šæ‰“å°å½“å‰é€‰æ‹©çš„è¡Œåˆ°å±å¹•ä¸Šï¼›<li><code>s</code> æ›¿æ¢ï¼Œé€šå¸¸så‘½ä»¤çš„ç”¨æ³•æ˜¯è¿™æ ·çš„ï¼š<code>1ï¼Œ2s/old/new/g</code>ï¼Œå°†oldå­—ç¬¦ä¸²æ›¿æ¢æˆnewå­—ç¬¦ä¸²</ul><h2 id=ming-ling-shi-li><a aria-label="Anchor link for: ming-ling-shi-li" class="header-anchor no-hover-padding" href=#ming-ling-shi-li><span aria-hidden=true class=link-icon></span></a> å‘½ä»¤ç¤ºä¾‹</h2><p>å‡è®¾æœ‰ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶test.txtï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š<pre class=z-code><code><span class="z-text z-plain">[user@computer ~]$ cat test.txt
</span><span class="z-text z-plain">this is first line
</span><span class="z-text z-plain">this is second line
</span><span class="z-text z-plain">happy everyday
</span><span class="z-text z-plain">end
</span></code></pre><p>æœ¬èŠ‚å°†ä½¿ç”¨è¯¥æ–‡ä»¶è¯¦ç»†æ¼”ç¤ºæ¯ä¸€ä¸ªå‘½ä»¤çš„ç”¨æ³•ã€‚<blockquote><p>æ–‡ä»¶å†…å®¹å¹¶æ²¡æœ‰æ”¹å˜ï¼Œé™¤éä½ ä½¿ç”¨é‡å®šå‘å­˜å‚¨è¾“å‡ºæˆ–è€…åŠ äº†é€‰é¡¹ <code>-i</code></blockquote><h3 id=a-ming-ling><a aria-label="Anchor link for: a-ming-ling" class="header-anchor no-hover-padding" href=#a-ming-ling><span aria-hidden=true class=link-icon></span></a> a å‘½ä»¤</h3><pre class=z-code><code><span class="z-text z-plain">[user@computer ~]$ sed '1a \add one' test.txt
</span><span class="z-text z-plain">this is first line
</span><span class="z-text z-plain">add one
</span><span class="z-text z-plain">this is second line
</span><span class="z-text z-plain">happy everyday
</span><span class="z-text z-plain">end
</span></code></pre><p>æœ¬ä¾‹çš„ä½œç”¨æ˜¯åœ¨ç¬¬ä¸€è¡Œä¹‹åå¢åŠ å­—ç¬¦ä¸²â€add oneâ€ï¼Œä»è¾“å‡ºå¯ä»¥çœ‹åˆ°å…·ä½“æ•ˆæœã€‚ æœ¬ä¾‹å‘½ä»¤éƒ¨åˆ†è¯´æ˜ï¼š<ul><li>1è¡¨ç¤ºç¬¬ä¸€è¡Œï¼ŒåŒæ ·çš„ç¬¬äºŒè¡Œå†™æˆ2ï¼Œç¬¬ä¸€è¡Œåˆ°ç¬¬ä¸‰è¡Œå†™æˆ<code>1,3</code>ï¼Œ<li>ç”¨<code>$</code>è¡¨ç¤ºæœ€åä¸€è¡Œï¼Œæ¯”å¦‚<code>2,$</code>è¡¨ç¤ºç¬¬äºŒè¡Œåˆ°æœ€åä¸€è¡Œä¸­é—´æ‰€æœ‰çš„è¡Œ(åŒ…å«ç¬¬äºŒè¡Œå’Œæœ€åä¸€è¡Œ)</ul><pre class=z-code><code><span class="z-text z-plain">[user@computer ~]$ sed '1,$a \add one' test.txt
</span><span class="z-text z-plain">this is first line
</span><span class="z-text z-plain">add one
</span><span class="z-text z-plain">this is second line
</span><span class="z-text z-plain">add one
</span><span class="z-text z-plain">happy everyday
</span><span class="z-text z-plain">add one
</span><span class="z-text z-plain">end
</span><span class="z-text z-plain">add one
</span></code></pre><p>æœ¬ä¾‹è¡¨ç¤ºåœ¨ç¬¬ä¸€è¡Œå’Œæœ€åä¸€è¡Œæ‰€æœ‰çš„è¡Œåé¢éƒ½åŠ ä¸Šâ€add oneâ€å­—ç¬¦ä¸²ï¼Œä»è¾“å‡ºå¯ä»¥çœ‹åˆ°æ•ˆæœã€‚<pre class=z-code><code><span class="z-text z-plain">[user@computer ~]$ sed '/first/a \add one' test.txt
</span><span class="z-text z-plain">this is first line
</span><span class="z-text z-plain">add one
</span><span class="z-text z-plain">this is second line
</span><span class="z-text z-plain">happy everyday
</span><span class="z-text z-plain">end
</span></code></pre><p>æœ¬ä¾‹è¡¨ç¤ºåœ¨åŒ…å«â€firstâ€å­—ç¬¦ä¸²çš„è¡Œçš„åé¢åŠ ä¸Šå­—ç¬¦ä¸²â€add oneâ€ï¼Œä»è¾“å‡ºå¯ä»¥çœ‹åˆ°ç¬¬ä¸€è¡ŒåŒ…å«firstï¼Œæ‰€ä»¥ç¬¬ä¸€è¡Œä¹‹åå¢åŠ äº†â€add oneâ€<pre class=z-code><code><span class="z-text z-plain">[user@computer ~]$ sed '/^ha.*day$/a \add one' test.txt
</span><span class="z-text z-plain">this is first line
</span><span class="z-text z-plain">this is second line
</span><span class="z-text z-plain">happy everyday
</span><span class="z-text z-plain">add one
</span><span class="z-text z-plain">end
</span></code></pre><p>æœ¬ä¾‹ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è¡Œ<ul><li><code>^ha.*day$</code>è¡¨ç¤ºä»¥haå¼€å¤´ï¼Œä»¥dayç»“å°¾çš„è¡Œï¼Œåˆ™å¯ä»¥åŒ¹é…åˆ°æ–‡ä»¶çš„â€happy everydayâ€è¿™æ ·ï¼Œæ‰€ä»¥åœ¨è¯¥è¡Œåé¢å¢åŠ äº†â€add oneâ€å­—ç¬¦ä¸²ã€‚</ul><h3 id=i-ming-ling><a aria-label="Anchor link for: i-ming-ling" class="header-anchor no-hover-padding" href=#i-ming-ling><span aria-hidden=true class=link-icon></span></a> i å‘½ä»¤</h3><p>i å‘½ä»¤ä½¿ç”¨æ–¹æ³•å’Œaå‘½ä»¤ä¸€æ ·çš„ï¼Œåªä¸è¿‡æ˜¯åœ¨åŒ¹é…çš„ <strong>è¡Œçš„å‰é¢</strong> æ’å…¥å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ç›´æ¥å°†ä¸Šé¢aå‘½ä»¤çš„ç¤ºä¾‹çš„aæ›¿æ¢æˆiå³å¯ï¼Œåœ¨æ­¤å°±ä¸å•°å—¦äº†ã€‚<h4 id=mac-xia-de-wen-ti><a aria-label="Anchor link for: mac-xia-de-wen-ti" class="header-anchor no-hover-padding" href=#mac-xia-de-wen-ti><span aria-hidden=true class=link-icon></span></a> mac ä¸‹çš„é—®é¢˜</h4><p>mac æ‰§è¡Œ<code>sed -i</code>æŒ‡ä»¤æ—¶ï¼Œæ€»æ˜¯å‡ºç° <code>extra characters at the end of command</code> é”™è¯¯æç¤ºã€‚<p>unixä¸linuxåœ¨æ‰§è¡ŒsedæŒ‡ä»¤æ˜¯ï¼Œæ˜¯æœ‰äº›åŒºåˆ«ï¼Œæ”¹æˆå¦‚ä¸‹å°±æ­£ç¡®ï¼š<pre class=z-code><code><span class="z-text z-plain"> sed -i "" "s/192.168.0.2/192.168.0.3/g" *.rptdesign
</span></code></pre><p>å°±æ˜¯åœ¨<code>-i</code>æŒ‡ä»¤åé¢å¤šåŠ ä¸€ä¸ª<code>""</code>ç©ºæ ¼å³å¯ã€‚<h3 id=c-ming-ling><a aria-label="Anchor link for: c-ming-ling" class="header-anchor no-hover-padding" href=#c-ming-ling><span aria-hidden=true class=link-icon></span></a> c å‘½ä»¤</h3><p>å°†æœ€åä¸€è¡Œæ›¿æ¢æˆå­—ç¬¦ä¸²â€add oneâ€ï¼Œä»è¾“å‡ºå¯ä»¥çœ‹åˆ°æ•ˆæœã€‚<pre class=z-code><code><span class="z-text z-plain">[user@computer ~]$ sed '$c \add one' test.txt
</span><span class="z-text z-plain">this is first line
</span><span class="z-text z-plain">this is second line
</span><span class="z-text z-plain">this is third line
</span><span class="z-text z-plain">this is fourth line
</span><span class="z-text z-plain">this is     fifth line
</span><span class="z-text z-plain">happy everyday
</span><span class="z-text z-plain">add one
</span></code></pre><p>å°†ç¬¬å››è¡Œåˆ°æœ€åä¸€è¡Œçš„å†…å®¹æ›¿æ¢æˆå­—ç¬¦ä¸²â€add oneâ€ã€‚<pre class=z-code><code><span class="z-text z-plain">[user@computer ~]$ sed '4,$c \add one' test.txt
</span><span class="z-text z-plain">this is first line
</span><span class="z-text z-plain">this is second line
</span><span class="z-text z-plain">this is third line
</span><span class="z-text z-plain">add one
</span></code></pre><p>å°†ä»¥haå¼€å¤´ï¼Œä»¥dayç»“å°¾çš„è¡Œæ›¿æ¢æˆâ€replace lineâ€ã€‚<pre class=z-code><code><span class="z-text z-plain">[user@computer ~]$ sed '/^ha.*day$/c \replace line' test.txt
</span><span class="z-text z-plain">this is first line
</span><span class="z-text z-plain">this is second line
</span><span class="z-text z-plain">replace line
</span><span class="z-text z-plain">end
</span></code></pre><h3 id=d-ming-ling><a aria-label="Anchor link for: d-ming-ling" class="header-anchor no-hover-padding" href=#d-ming-ling><span aria-hidden=true class=link-icon></span></a> d å‘½ä»¤</h3><p>æœ¬ä¾‹åˆ é™¤ä»¥haå¼€å¤´ï¼Œä»¥dayç»“å°¾çš„è¡Œã€‚<pre class=z-code><code><span class="z-text z-plain">[user@computer ~]$ sed '/^ha.*day$/d' test.txt
</span><span class="z-text z-plain">this is first line
</span><span class="z-text z-plain">this is second line
</span><span class="z-text z-plain">end
</span></code></pre><p>æœ¬ä¾‹åˆ é™¤ç¬¬å››è¡Œåˆ°æœ€åä¸€è¡Œä¸­çš„å†…å®¹ã€‚<pre class=z-code><code><span class="z-text z-plain">[user@computer ~]$ sed '4,$d' test.txt
</span><span class="z-text z-plain">this is first line
</span><span class="z-text z-plain">this is second line
</span><span class="z-text z-plain">this is third line
</span></code></pre><h3 id=p-ming-ling><a aria-label="Anchor link for: p-ming-ling" class="header-anchor no-hover-padding" href=#p-ming-ling><span aria-hidden=true class=link-icon></span></a> p å‘½ä»¤</h3><p>åœ¨å±å¹•ä¸Šæ‰“å°ç¬¬å››è¡Œåˆ°æœ€åä¸€è¡Œçš„å†…å®¹ï¼Œpå‘½ä»¤ä¸€èˆ¬å’Œ-né€‰é¡¹ä¸€èµ·ä½¿ç”¨ã€‚<pre class=z-code><code><span class="z-text z-plain">[user@computer ~]$ sed -n '4,$p' test.txt
</span><span class="z-text z-plain">this is fourth line
</span><span class="z-text z-plain">this is fifth line
</span><span class="z-text z-plain">happy everyday
</span><span class="z-text z-plain">end
</span></code></pre><p>æœ¬ä¾‹æ‰“å°ä»¥haå¼€å§‹ï¼Œä»¥dayç»“å°¾çš„è¡Œã€‚<pre class=z-code><code><span class="z-text z-plain">[user@computer ~]$ sed -n '/^ha.*day$/p' test.txt
</span><span class="z-text z-plain">happy everyday
</span></code></pre><h3 id=s-ming-ling><a aria-label="Anchor link for: s-ming-ling" class="header-anchor no-hover-padding" href=#s-ming-ling><span aria-hidden=true class=link-icon></span></a> s å‘½ä»¤</h3><p>å®é™…è¿ç”¨ä¸­så‘½ä»¤å¼æœ€å¸¸ä½¿ç”¨åˆ°çš„ã€‚ ç¤ºä¾‹ï¼š<p>å°†æ–‡ä»¶ä¸­çš„æ‰€æœ‰<code>line</code>æ›¿æ¢æˆ<code>text</code>ã€‚<ul><li>æœ€åçš„gæ˜¯globalçš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯å…¨å±€æ›¿æ¢ï¼Œå¦‚æœä¸åŠ gï¼Œåˆ™åªä¼šæ›¿æ¢æœ¬è¡Œçš„ç¬¬ä¸€ä¸ªlineã€‚</ul><pre class=z-code><code><span class="z-text z-plain">[user@computer ~]$ sed 's/line/text/g' test.txt
</span><span class="z-text z-plain">this is first text
</span><span class="z-text z-plain">this is second text
</span><span class="z-text z-plain">happy everyday
</span><span class="z-text z-plain">end
</span></code></pre><p>æ›¿æ¢åŒ¹é…è¡Œä¸­çš„æŸä¸ªå­—ç¬¦ä¸²<p>é¦–å…ˆåŒ¹é…ä»¥haå¼€å§‹ï¼Œä»¥dayç»“å°¾çš„è¡Œï¼Œæœ¬ä¾‹ä¸­åŒ¹é…åˆ°çš„è¡Œæ˜¯â€happy everydayâ€è¿™æ ·ï¼Œç„¶åå†å°†è¯¥è¡Œä¸­çš„happyæ›¿æ¢æˆvery happyã€‚<pre class=z-code><code><span class="z-text z-plain">[user@computer ~]$ sed '/^ha.*day$/s/happy/very happy/g' test.txt
</span><span class="z-text z-plain">this is first line
</span><span class="z-text z-plain">this is second line
</span><span class="z-text z-plain">very happy everyday
</span><span class="z-text z-plain">end
</span></code></pre><p>å¼•ç”¨æ›¿æ¢<pre class=z-code><code><span class="z-text z-plain">[user@computer ~]$ sed 's/\(.*\)line$/\1/g' test.txt
</span><span class="z-text z-plain">this is first
</span><span class="z-text z-plain">this is second
</span><span class="z-text z-plain">happy everyday
</span><span class="z-text z-plain">end
</span></code></pre><p>è¿™ä¸ªä¾‹å­æœ‰ç‚¹å¤æ‚ï¼Œå…ˆåˆ†è§£ä¸€ä¸‹ã€‚<p>é¦–å…ˆså‘½ä»¤çš„æ¨¡å¼æ˜¯<code>s/old/new/g</code>è¿™æ ·çš„ï¼Œæ‰€ä»¥æœ¬ä¾‹çš„oldéƒ¨åˆ†å³<code>\(.*\)line$</code>,sedå‘½ä»¤ä¸­ä½¿ç”¨<code>\(\)</code>åŒ…è£¹çš„å†…å®¹è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬néƒ¨åˆ†ï¼Œ åºå·ä»1å¼€å§‹è®¡ç®—ï¼Œæœ¬ä¾‹ä¸­åªæœ‰ä¸€ä¸ª<code>\(\)</code>æ‰€ä»¥<code>\(.*\)</code>è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œ è¿™éƒ¨åˆ†åŒ¹é…ä»»æ„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥<code>\(.*\)line$</code>åŒ¹é…çš„å°±æ˜¯ä»¥lineç»“å°¾çš„ä»»ä½•è¡Œã€‚<p>ç„¶åå°†åŒ¹é…åˆ°çš„è¡Œæ›¿æ¢æˆæ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬ä¸€éƒ¨åˆ†ï¼ˆæœ¬ä¾‹ä¸­ç›¸å½“äºåˆ é™¤lineéƒ¨åˆ†ï¼‰ï¼Œä½¿ç”¨<code>\1</code>è¡¨ç¤ºåŒ¹é…åˆ°çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œ åŒæ ·<code>\2</code>è¡¨ç¤ºç¬¬äºŒéƒ¨åˆ†ï¼Œ<code>\3</code>è¡¨ç¤ºç¬¬ä¸‰éƒ¨åˆ†ï¼Œå¯ä»¥ä¾æ¬¡è¿™æ ·å¼•ç”¨ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š<pre class=z-code><code><span class="z-text z-plain">[user@computer ~]$ sed 's/\(.*\)is\(.*\)line/\1\2/g' test.txt
</span><span class="z-text z-plain">this  first
</span><span class="z-text z-plain">this  second
</span><span class="z-text z-plain">happy everyday
</span><span class="z-text z-plain">end
</span></code></pre><p>æ­£åˆ™è¡¨è¾¾å¼ä¸­isä¸¤è¾¹çš„éƒ¨åˆ†å¯ä»¥ç”¨<code>\1</code>å’Œ<code>\2</code>è¡¨ç¤ºï¼Œè¯¥ä¾‹å­çš„ä½œç”¨å…¶å®å°±æ˜¯åˆ é™¤ä¸­é—´éƒ¨åˆ†çš„isã€‚<blockquote><p>è½¬è½½æ•´ç†è‡ªï¼š<a rel="noopener nofollow noreferrer" class=external href=http://qifuguang.me/2015/09/21/sed%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/ target=_blank>sedå‘½ä»¤è¯¦è§£</a></blockquote></section></article></main><div id=button-container><div id=toc-floating-container><input class=toggle id=toc-toggle type=checkbox><label class=button for=toc-toggle id=toc-button title=åˆ‡æ¢ç›®å½•><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M414.82-193.094q-18.044 0-30.497-12.32-12.453-12.319-12.453-30.036t12.453-30.086q12.453-12.37 30.497-12.37h392.767q17.237 0 29.927 12.487 12.69 12.486 12.69 30.203 0 17.716-12.69 29.919t-29.927 12.203H414.82Zm0-244.833q-18.044 0-30.497-12.487Q371.87-462.9 371.87-480.45t12.453-29.92q12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.511 12.69 12.512 12.69 29.845 0 17.716-12.69 30.086-12.69 12.37-29.927 12.37H414.82Zm0-245.167q-18.044 0-30.497-12.32t-12.453-30.037q0-17.716 12.453-30.086 12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.486 12.69 12.487 12.69 30.203 0 17.717-12.69 29.92-12.69 12.203-29.927 12.203H414.82ZM189.379-156.681q-32.652 0-55.878-22.829t-23.226-55.731q0-32.549 23.15-55.647 23.151-23.097 55.95-23.097 32.799 0 55.313 23.484 22.515 23.484 22.515 56.246 0 32.212-22.861 54.893-22.861 22.681-54.963 22.681Zm0-245.167q-32.652 0-55.878-23.134-23.226-23.135-23.226-55.623 0-32.487 23.467-55.517t56.12-23.03q32.102 0 54.721 23.288 22.62 23.288 22.62 55.775 0 32.488-22.861 55.364-22.861 22.877-54.963 22.877Zm-.82-244.833q-32.224 0-55.254-23.288-23.03-23.289-23.03-55.623 0-32.333 23.271-55.364 23.272-23.03 55.495-23.03 32.224 0 55.193 23.288 22.969 23.289 22.969 55.622 0 32.334-23.21 55.364-23.21 23.031-55.434 23.031Z"/></svg></label><div class=toc-content><div class=toc-container><ul><li><a href=https://inhere.github.io/blog/2016/sec-command-usage-in-linux/#shi-yong-yu-fa>ä½¿ç”¨è¯­æ³•</a><li><a href=https://inhere.github.io/blog/2016/sec-command-usage-in-linux/#ming-ling-shi-li>å‘½ä»¤ç¤ºä¾‹</a> <ul><li><a href=https://inhere.github.io/blog/2016/sec-command-usage-in-linux/#a-ming-ling>a å‘½ä»¤</a><li><a href=https://inhere.github.io/blog/2016/sec-command-usage-in-linux/#i-ming-ling>i å‘½ä»¤</a> <ul><li><a href=https://inhere.github.io/blog/2016/sec-command-usage-in-linux/#mac-xia-de-wen-ti>mac ä¸‹çš„é—®é¢˜</a></ul><li><a href=https://inhere.github.io/blog/2016/sec-command-usage-in-linux/#c-ming-ling>c å‘½ä»¤</a><li><a href=https://inhere.github.io/blog/2016/sec-command-usage-in-linux/#d-ming-ling>d å‘½ä»¤</a><li><a href=https://inhere.github.io/blog/2016/sec-command-usage-in-linux/#p-ming-ling>p å‘½ä»¤</a><li><a href=https://inhere.github.io/blog/2016/sec-command-usage-in-linux/#s-ming-ling>s å‘½ä»¤</a></ul></ul></div></div></div><a class=no-hover-padding href=# id=top-button title=è¿”å›é¡µé¢é¡¶éƒ¨> <svg viewbox="0 0 20 20" fill=currentColor><path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/></svg> </a></div><span class=hidden id=copy-success> å·²å¤åˆ¶! </span><span class=hidden id=copy-init> å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ </span><script defer src=https://inhere.github.io/js/copyCodeToClipboard.min.js></script></div><footer><section><nav class="socials nav-navs"><ul><li><a class="nav-links no-hover-padding social" rel="noopener noreferrer" href=https://inhere.github.io/atom.xml target=_blank> <img alt=feed loading=lazy src=https://inhere.github.io/social_icons/rss.svg title=feed> </a><li><a class="nav-links no-hover-padding social" rel="noopener noreferrer me" href=https://github.com/inhere/ target=_blank> <img alt=github loading=lazy src=https://inhere.github.io/social_icons/github.svg title=github> </a></ul></nav><nav class=nav-navs><small> <ul><li><a class="nav-links no-hover-padding" href=https://inhere.github.io/pages/about> ğŸ¶ About </a><li><a class="nav-links no-hover-padding" href=https://github.com/gookit> ğŸ± Gookit </a><li><a class="nav-links no-hover-padding" href=https://github.com/phppkg> ğŸ± PHPPkg </a><li><a class="nav-links no-hover-padding" href=https://inhere.github.io/sitemap.xml> ğŸ“„ Sitemap </a></ul> </small></nav><div class=credits><small> ç½‘ç«™åŸºäº <a rel="noopener noreferrer" href=https://www.getzola.org target=_blank>Zola</a> å’Œ <a rel="noopener noreferrer" href=https://github.com/welpo/tabi target=_blank>tabi</a> â€¢ <a rel="noopener noreferrer" href=https://github.com/inhere/inhere.github.io target=_blank> æŸ¥çœ‹åŸå§‹ç  </a></small></div></section></footer>