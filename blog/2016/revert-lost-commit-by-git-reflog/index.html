<!doctype html><html lang=zh-Hans><head><meta charset=UTF-8><meta content="default-src 'self';font-src 'self' data:;img-src 'self' https://* data:;media-src 'self';style-src 'self';frame-src player.vimeo.com https://www.youtube-nocookie.com;connect-src 'self';script-src 'self' 'self'" http-equiv=Content-Security-Policy><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://inhere.github.io name=base><title>
Inhere's Site â€¢ git æ‰¾å›ä¸¢å¤± commit</title><link href=https://inhere.github.io/icons/favicon.ico rel=icon type=image/png><link title="Inhere's Site - Atom Feed" href=https://inhere.github.io/atom.xml rel=alternate type=application/atom+xml><link href="https://inhere.github.io/custom_subset.css?h=0b9535a28bc3d5bf2321" rel=stylesheet><link href="https://inhere.github.io/main.css?h=045c365e19a4d50a64bb" rel=stylesheet><link href="https://inhere.github.io/custom.css?h=b0b090835487d694b863" rel=stylesheet><link href="https://inhere.github.io/skins/blue.css?h=a4dc1e94d3f5759784d2" rel=stylesheet><meta content="light dark" name=color-scheme><meta content="åœ¨ä½¿ç”¨gitçš„è¿‡ç¨‹ä¸­ï¼Œå¸¸æœ‰å¤±è¯¯çš„æ—¶å€™ï¼Œæœ‰æ—¶æŠŠéœ€è¦çš„ä¸œè¥¿ç»™åˆ äº†æˆ–è€…ä½¿ç”¨rebaseè¦†ç›–æ‰äº†ä¸€äº›æœ‰ç”¨çš„ä»£ç ã€‚
ä¸è¿‡æ²¡æœ‰å…³ç³»ï¼Œgitç»™äº†æˆ‘ä»¬ä¸€å±‚å®‰å…¨ç½‘ï¼Œè®©ä»¬èƒ½æœ‰æœºä¼šæŠŠå¤±å»çš„ä¸œè¥¿ç»™æ‰¾å›æ¥ã€‚â€¦" name=description><meta content="åœ¨ä½¿ç”¨gitçš„è¿‡ç¨‹ä¸­ï¼Œå¸¸æœ‰å¤±è¯¯çš„æ—¶å€™ï¼Œæœ‰æ—¶æŠŠéœ€è¦çš„ä¸œè¥¿ç»™åˆ äº†æˆ–è€…ä½¿ç”¨rebaseè¦†ç›–æ‰äº†ä¸€äº›æœ‰ç”¨çš„ä»£ç ã€‚
ä¸è¿‡æ²¡æœ‰å…³ç³»ï¼Œgitç»™äº†æˆ‘ä»¬ä¸€å±‚å®‰å…¨ç½‘ï¼Œè®©ä»¬èƒ½æœ‰æœºä¼šæŠŠå¤±å»çš„ä¸œè¥¿ç»™æ‰¾å›æ¥ã€‚â€¦" property=og:description><meta content="git æ‰¾å›ä¸¢å¤± commit" property=og:title><meta content=article property=og:type><meta content=zh_CN property=og:locale><meta content=https://inhere.github.io/blog/2016/revert-lost-commit-by-git-reflog/ property=og:url><meta content="Inhere's Site" property=og:site_name><noscript><link href=https://inhere.github.io/no_js.css rel=stylesheet></noscript><script src=https://inhere.github.io/js/initializeTheme.min.js></script><script defer src=https://inhere.github.io/js/themeSwitcher.min.js></script><body><a href=#main-content id=skip-link>è·³åˆ°å†…å®¹</a><header><nav class=navbar><div class=nav-title><a class=home-title href=https://inhere.github.io/>Inhere's Site</a></div><div class=nav-navs><ul><li><a class="nav-links no-hover-padding" href=https://inhere.github.io/blog/>ğŸ“ Blog </a><li><a class="nav-links no-hover-padding" href=https://inhere.github.io/projects/>ğŸš€ Projects </a><li><a class="nav-links no-hover-padding" href=https://inhere.github.io/collections/>ğŸ“š Collections </a><li><a class="nav-links no-hover-padding" href=https://inhere.github.io/tags/>ğŸ·ï¸ Tags </a><li><a class="nav-links no-hover-padding" href=https://inhere.github.io/archive/>ğŸ—„ï¸ Archive </a><li><a class="nav-links no-hover-padding" href=https://github.com/inhere>ğŸ± Github </a><li class=menu-icons-container><ul class=menu-icons-group><li class="theme-switcher-wrapper js"><div aria-label=åˆ‡æ¢åˆ°æš—æ¨¡å¼ aria-pressed=false class=theme-switcher role=button tabindex=0 title=åˆ‡æ¢åˆ°æš—/äº®æ¨¡å¼></div><div class="theme-resetter arrow" aria-hidden=true aria-label=å°†æ¨¡å¼é‡ç½®ä¸ºç½‘ç«™é»˜è®¤å€¼ role=button tabindex=0 title=å°†æ¨¡å¼é‡ç½®ä¸ºç½‘ç«™é»˜è®¤å€¼></div></ul></ul></div></nav></header><div class=content id=main-content><main><article class=h-entry><h1 class="p-name article-title">git æ‰¾å›ä¸¢å¤± commit</h1><a class="u-url u-uid" href=https://inhere.github.io/blog/2016/revert-lost-commit-by-git-reflog/></a><ul class=meta><span class="hidden p-author h-card"> <a class=u-url href=https://inhere.github.io rel=author title=Inhere>Inhere</a> </span><li><time class=dt-published datetime=2016-04-01T12:30:34>1 4æœˆ 2016</time><li title="409 å­—"><span aria-hidden=true class=separator>â€¢</span>3 åˆ†é’Ÿé˜…è¯»<li class=tag><span aria-hidden=true class=separator>â€¢</span>æ ‡ç­¾:Â <li class=tag><a class=p-category href=https://inhere.github.io/tags/git/>git</a>,Â <li class=tag><a class=p-category href=https://inhere.github.io/tags/git-log/>git-log</a>,Â <li class=tag><a class=p-category href=https://inhere.github.io/tags/git-reflog/>git-reflog</a></ul><section class="e-content body"><p>åœ¨ä½¿ç”¨gitçš„è¿‡ç¨‹ä¸­ï¼Œå¸¸æœ‰å¤±è¯¯çš„æ—¶å€™ï¼Œæœ‰æ—¶æŠŠéœ€è¦çš„ä¸œè¥¿ç»™åˆ äº†æˆ–è€…ä½¿ç”¨rebaseè¦†ç›–æ‰äº†ä¸€äº›æœ‰ç”¨çš„ä»£ç ã€‚<p>ä¸è¿‡æ²¡æœ‰å…³ç³»ï¼Œgitç»™äº†æˆ‘ä»¬ä¸€å±‚å®‰å…¨ç½‘ï¼Œè®©ä»¬èƒ½æœ‰æœºä¼šæŠŠå¤±å»çš„ä¸œè¥¿ç»™æ‰¾å›æ¥ã€‚</p><span id=continue-reading></span><h2 id=cha-zhao-diu-shi-de-ji-lu><a aria-label="Anchor link for: cha-zhao-diu-shi-de-ji-lu" class="header-anchor no-hover-padding" href=#cha-zhao-diu-shi-de-ji-lu><span aria-hidden=true class=link-icon></span></a> æŸ¥æ‰¾ä¸¢å¤±çš„è®°å½•</h2><p>å‡è®¾ä½ ä¸å°å¿ƒæäº¤äº†äº›ä½ ä¸æƒ³è¦çš„ä¸œè¥¿ï¼Œä¸å¾—ä¸åšä¸€æ¬¡å¼ºåˆ¶é‡ç½®æ¥æ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€ã€‚ ç„¶åï¼Œä½ æ„è¯†åˆ°åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ä½ ä¸¢å¤±äº†å…¶å®ƒä¸€äº›ä¿¡æ¯å¹¶ä¸”æƒ³è¦æŠŠå®ƒä»¬æ‰¾å›æ¥ï¼Œæˆ–è€…è‡³å°‘ç…ä¸€çœ¼ã€‚è¿™æ­£æ˜¯<code>git reflog</code>å¯ä»¥åšåˆ°çš„ã€‚<p>ä¸€ä¸ªç®€å•çš„<code>git log</code>å‘½ä»¤å¯ä»¥ä¸ºä½ å±•ç¤ºæœ€åä¸€æ¬¡commitï¼Œä»¥åŠå®ƒçš„çˆ¶äº²ï¼Œè¿˜æœ‰å®ƒçˆ¶äº²çš„çˆ¶äº²ç­‰ç­‰ã€‚è€Œ<code>git reflog</code>åˆ™åˆ—å‡ºäº†headæ›¾ç»æŒ‡å‘è¿‡çš„ä¸€ç³»åˆ—commitã€‚<blockquote><p>è¦æ˜ç™½å®ƒä»¬(ä¸¢å¤±çš„è®°å½•)åªå­˜åœ¨äºä½ æœ¬æœºä¸­,è€Œä¸æ˜¯ä½ çš„ç‰ˆæœ¬ä»“åº“çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸åŒ…å«åœ¨pushå’Œmergeæ“ä½œä¸­ã€‚</blockquote><ul><li>å¦‚æœæˆ‘è¿è¡Œ<code>git log</code>å‘½ä»¤ï¼Œæˆ‘å¯ä»¥çœ‹åˆ°ä¸€äº›commitï¼Œå®ƒä»¬éƒ½æ˜¯æˆ‘ä»“åº“çš„ä¸€éƒ¨åˆ†ï¼š</ul><pre class=z-code><code><span class="z-text z-plain">$ git log -4
</span><span class="z-text z-plain">commit 6b8df20b71fcd1622109c2319c13df3120cd3716
</span><span class="z-text z-plain">Author: xyz &lt;xyz@compay.com>
</span><span class="z-text z-plain">Date:   Wed Mar 30 17:41:42 2016 +0800
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">    update
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">commit bcb250dcda7ec609dda522d0bff38161a57e20d0
</span><span class="z-text z-plain">Author: xyz &lt;xyz@compay.com>
</span><span class="z-text z-plain">Date:   Wed Mar 30 15:51:00 2016 +0800
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">    update
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">commit 93d354756f8941201d0c53c7947766f6bd5955bf
</span><span class="z-text z-plain">Author: xyz &lt;xyz@compay.com>
</span><span class="z-text z-plain">Date:   Wed Mar 30 13:38:07 2016 +0800
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">    update Model.php,rename BaseController to Controller
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">commit 185bcfce1a9c3fb4164f675318d5ad0086ea39d1
</span><span class="z-text z-plain">Author: xyz &lt;xyz@compay.com>
</span><span class="z-text z-plain">Date:   Wed Mar 30 11:35:39 2016 +0800
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">    database operate update
</span><span class="z-text z-plain">
</span></code></pre><ul><li><code>git reflog</code>å‘½ä»¤åˆ™å±•ç¤ºäº†ä¸€æ¬¡<code>9d7aabc HEAD@{1}: commit: update</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸¢å¤±æ‰çš„æäº¤è®°å½•ï¼š</ul><pre class=z-code><code><span class="z-text z-plain">$ git reflog -4
</span><span class="z-text z-plain">6b8df20 HEAD@{0}: commit (amend): update
</span><span class="z-text z-plain">9d7aabc HEAD@{1}: commit: update
</span><span class="z-text z-plain">bcb250d HEAD@{2}: commit: update
</span><span class="z-text z-plain">93d3547 HEAD@{3}: commit (amend): update Model.php,rename BaseController to Controller
</span><span class="z-text z-plain">
</span></code></pre><p>ä½¿ç”¨<code>git log 9d7aabc -p</code> æˆ–è€… <code>git show 9d7aabc</code>æŸ¥çœ‹ä¸¢å¤±äº†é‚£äº›æ”¹åŠ¨<h2 id=ru-he-hui-fu-ni><a aria-label="Anchor link for: ru-he-hui-fu-ni" class="header-anchor no-hover-padding" href=#ru-he-hui-fu-ni><span aria-hidden=true class=link-icon></span></a> å¦‚ä½•æ¢å¤å‘¢</h2><ul><li>ä½¿ç”¨rebaseï¼Œç”¨å‘½ä»¤<code>git rebase</code>æ¥è¿›è¡Œæ¢å¤ï¼š<code>$ git rebase 9d7aabc</code><li>ä½¿ç”¨mergeï¼Œç”¨åˆå¹¶å‘½ä»¤<code>git merge</code>æ¥è¿›è¡Œæ¢å¤ï¼š<code>$ git merge 9d7aabc</code></ul><blockquote><p>å¦å¤–æœ‰ä¸€ç¯‡åšæ–‡ä½¿ç”¨ <code>git fsck --lost-found</code> <a rel="noopener nofollow noreferrer" class=external href=http://liuhui998.com/2010/10/22/recover_lost_commits_with_git/ target=_blank>å¦‚ä½•æ‰¾å›git ä¸­ä¸¢å¤±çš„æäº¤(commit) </a></blockquote></section></article></main><div id=button-container><div id=toc-floating-container><input class=toggle id=toc-toggle type=checkbox><label class=button for=toc-toggle id=toc-button title=åˆ‡æ¢ç›®å½•><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M414.82-193.094q-18.044 0-30.497-12.32-12.453-12.319-12.453-30.036t12.453-30.086q12.453-12.37 30.497-12.37h392.767q17.237 0 29.927 12.487 12.69 12.486 12.69 30.203 0 17.716-12.69 29.919t-29.927 12.203H414.82Zm0-244.833q-18.044 0-30.497-12.487Q371.87-462.9 371.87-480.45t12.453-29.92q12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.511 12.69 12.512 12.69 29.845 0 17.716-12.69 30.086-12.69 12.37-29.927 12.37H414.82Zm0-245.167q-18.044 0-30.497-12.32t-12.453-30.037q0-17.716 12.453-30.086 12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.486 12.69 12.487 12.69 30.203 0 17.717-12.69 29.92-12.69 12.203-29.927 12.203H414.82ZM189.379-156.681q-32.652 0-55.878-22.829t-23.226-55.731q0-32.549 23.15-55.647 23.151-23.097 55.95-23.097 32.799 0 55.313 23.484 22.515 23.484 22.515 56.246 0 32.212-22.861 54.893-22.861 22.681-54.963 22.681Zm0-245.167q-32.652 0-55.878-23.134-23.226-23.135-23.226-55.623 0-32.487 23.467-55.517t56.12-23.03q32.102 0 54.721 23.288 22.62 23.288 22.62 55.775 0 32.488-22.861 55.364-22.861 22.877-54.963 22.877Zm-.82-244.833q-32.224 0-55.254-23.288-23.03-23.289-23.03-55.623 0-32.333 23.271-55.364 23.272-23.03 55.495-23.03 32.224 0 55.193 23.288 22.969 23.289 22.969 55.622 0 32.334-23.21 55.364-23.21 23.031-55.434 23.031Z"/></svg></label><div class=toc-content><div class=toc-container><ul><li><a href=https://inhere.github.io/blog/2016/revert-lost-commit-by-git-reflog/#cha-zhao-diu-shi-de-ji-lu>æŸ¥æ‰¾ä¸¢å¤±çš„è®°å½•</a><li><a href=https://inhere.github.io/blog/2016/revert-lost-commit-by-git-reflog/#ru-he-hui-fu-ni>å¦‚ä½•æ¢å¤å‘¢</a></ul></div></div></div><a class=no-hover-padding href=# id=top-button title=è¿”å›é¡µé¢é¡¶éƒ¨> <svg viewbox="0 0 20 20" fill=currentColor><path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/></svg> </a></div><span class=hidden id=copy-success> å·²å¤åˆ¶! </span><span class=hidden id=copy-init> å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿ </span><script defer src=https://inhere.github.io/js/copyCodeToClipboard.min.js></script></div><footer><section><nav class="socials nav-navs"><ul><li><a class="nav-links no-hover-padding social" rel="noopener noreferrer" href=https://inhere.github.io/atom.xml target=_blank> <img alt=feed loading=lazy src=https://inhere.github.io/social_icons/rss.svg title=feed> </a><li><a class="nav-links no-hover-padding social" rel="noopener noreferrer me" href=https://github.com/inhere/ target=_blank> <img alt=github loading=lazy src=https://inhere.github.io/social_icons/github.svg title=github> </a></ul></nav><nav class=nav-navs><small> <ul><li><a class="nav-links no-hover-padding" href=https://inhere.github.io/pages/about> ğŸ¶ About </a><li><a class="nav-links no-hover-padding" href=https://github.com/gookit> ğŸ± Gookit </a><li><a class="nav-links no-hover-padding" href=https://github.com/phppkg> ğŸ± PHPPkg </a><li><a class="nav-links no-hover-padding" href=https://inhere.github.io/sitemap.xml> ğŸ“„ Sitemap </a></ul> </small></nav><div class=credits><small> ç½‘ç«™åŸºäº <a rel="noopener noreferrer" href=https://www.getzola.org target=_blank>Zola</a> å’Œ <a rel="noopener noreferrer" href=https://github.com/welpo/tabi target=_blank>tabi</a> â€¢ <a rel="noopener noreferrer" href=https://github.com/inhere/inhere.github.io target=_blank> æŸ¥çœ‹åŸå§‹ç  </a></small></div></section></footer>