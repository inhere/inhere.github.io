<!doctype html>
<html lang="zh-CN" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">pflag - 更好的PHP命令行选项解析库 | Inhere&#x27;s Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://inhere.github.io/blog/pflag-better-php-command-line-parse-library"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="pflag - 更好的PHP命令行选项解析库 | Inhere&#x27;s Site"><meta data-rh="true" name="description" content="php-toolkit/pflag 是一个PHP编写的，通用的命令行标志(选项和参数)解析库。"><meta data-rh="true" property="og:description" content="php-toolkit/pflag 是一个PHP编写的，通用的命令行标志(选项和参数)解析库。"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2021-10-11T15:11:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/inhere"><meta data-rh="true" property="article:tag" content="php,cli,command-line,parser"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://inhere.github.io/blog/pflag-better-php-command-line-parse-library"><link data-rh="true" rel="alternate" href="https://inhere.github.io/blog/pflag-better-php-command-line-parse-library" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://inhere.github.io/en/blog/pflag-better-php-command-line-parse-library" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://inhere.github.io/blog/pflag-better-php-command-line-parse-library" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Inhere&#39;s Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Inhere&#39;s Site Atom Feed"><link rel="stylesheet" href="/assets/css/styles.8061ebb3.css">
<link rel="preload" href="/assets/js/runtime~main.841bab0d.js" as="script">
<link rel="preload" href="/assets/js/main.4fdf3650.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/inhere-s03.png" alt="Inhere&#x27;s Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/inhere-s03.png" alt="Inhere&#x27;s Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Inhere&#x27;s Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/blog/tags">Tags</a><a class="navbar__item navbar__link" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/projects">Projects</a><a class="navbar__item navbar__link" href="/about">About</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文（中国）</a><ul class="dropdown__menu"><li><a href="/blog/pflag-better-php-command-line-parse-library" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-CN">中文（中国）</a></li><li><a href="/en/blog/pflag-better-php-command-line-parse-library" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-GB">English</a></li></ul></div><a href="https://github.com/inhere" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="最近博文导航"><div class="sidebarItemTitle_pO2u margin-bottom--md">📅最近文章</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/gookit-config-intro">gookit/config - Go语言读取多种格式配置文件</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/install-tools-by-scoop-on-windows">通过 scoop 在Windows 下安装工具</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/install-and-config-docusaurus-v2.md">安装并配置 docusaurus v2站点</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/gookit-goutil-cflag-intro">cflag - 包装Go FlagSet构建简单且漂亮的命令行应用程序</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/gookit-gitw-intro">gitw - Git 命令包装器，生成 git 变更记录日志</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/gookit-slog-intro">slog - 一个易于使用的，易扩展、可配置的日志库</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">pflag - 更好的PHP命令行选项解析库</h1><div class="container_mt6G margin-vert--md"><time datetime="2021-10-11T15:11:00.000Z" itemprop="datePublished">2021年10月11日</time> · <!-- -->阅读需 8 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/inhere" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/inhere.png" alt="inhere"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/inhere" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">inhere</span></a></div><small class="avatar__subtitle" itemprop="description">docs maintainer</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p><code>php-toolkit/pflag</code> 是一个PHP编写的，通用的命令行标志(选项和参数)解析库。</p><p><img loading="lazy" src="https://github.com/php-toolkit/pflag/blob/main/example/images/flags-demo.png?raw=true" alt="flags-demo" class="img_ev3q"></p><blockquote><p>Github 仓库: <a href="https://github.com/php-toolkit/pflag" target="_blank" rel="noopener noreferrer">php-toolkit/pflag</a></p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="功能说明">功能说明<a class="hash-link" href="#功能说明" title="标题的直接链接">​</a></h2><ul><li>通用的命令行选项和参数解析器</li><li>支持设置值数据类型(<code>int,string,bool,array</code>)，将自动格式化输入值</li><li>支持为选项/参数设置默认值</li><li>支持为一个选项设置多个短名称</li><li>支持从环境变量读取标志值</li><li>支持设置选项/参数为必须的(<code>required</code>)</li><li>支持设置验证器以检查输入值</li><li>支持自动渲染漂亮的帮助信息。</li></ul><p><strong>命令行选项</strong>:</p><ul><li>选项以 <code>-</code> 或者 <code>--</code> 开头的，且首字符必须是字母</li><li>以 <code>--</code> 开头的为长选项. eg: <code>--long</code> <code>--long value</code></li><li>以 <code>-</code> 开头的为短选项 <code>-s -a value</code></li><li>支持定义数组选项<ul><li>eg: <code>--tag php --tag go</code> 将会得到 <code>$tag = [php, go]</code></li></ul></li></ul><p><strong>命令行参数</strong>:</p><ul><li>不能满足选项的都认作参数</li><li>支持绑定命名参数</li><li>支持定义数组参数</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="安装">安装<a class="hash-link" href="#安装" title="标题的直接链接">​</a></h2><p><strong>composer 安装</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">composer</span><span class="token plain"> require toolkit/pflag</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="flags-使用">Flags 使用<a class="hash-link" href="#flags-使用" title="标题的直接链接">​</a></h2><p>Flags - 是一个命令行标志（选项和参数）解析器和管理器。</p><blockquote><p>示例代码请参见 <a href="https://github.com/php-toolkit/pflag/blob/main/example/flags-demo.php" target="_blank" rel="noopener noreferrer">example/flags-demo.php</a></p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="创建解析器">创建解析器<a class="hash-link" href="#创建解析器" title="标题的直接链接">​</a></h3><p>创建和初始化解析器</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">use Toolkit\PFlag\Flags;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">require dirname(__DIR__) . &#x27;/test/bootstrap.php&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$flags = $_SERVER[&#x27;argv&#x27;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// NOTICE: must shift first element.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$scriptFile = array_shift($flags);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$fs = Flags::new();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// （可选的）可以添加一些自定义设置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$fs-&gt;setScriptFile($scriptFile);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/** @see Flags::$settings */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$fs-&gt;setSettings([</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;descNlOnOptLen&#x27; =&gt; 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="定义选项">定义选项<a class="hash-link" href="#定义选项" title="标题的直接链接">​</a></h3><p>定义选项 - 定义好支持的选项设置，解析时将会根据定义来解析输入</p><p>添加选项定义的示例:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">use Toolkit\PFlag\Flag\Option;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Toolkit\PFlag\FlagType;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Toolkit\PFlag\Validator\EnumValidator;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// add options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// - quick add</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$fs-&gt;addOpt(&#x27;age&#x27;, &#x27;a&#x27;, &#x27;this is a int option&#x27;, FlagType::INT);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// - 使用字符串规则快速添加选项定义</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$fs-&gt;addOptByRule(&#x27;name,n&#x27;, &#x27;string;this is a string option;true&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// -- 一次添加多个选项</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$fs-&gt;addOptsByRules([</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;tag,t&#x27; =&gt; &#x27;strings;array option, allow set multi times&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;f&#x27;     =&gt; &#x27;bool;this is an bool option&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// - 使用数组定义</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/** @see Flags::DEFINE_ITEM for array rule */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$fs-&gt;addOptByRule(&#x27;name-is-very-lang&#x27;, [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;type&#x27;   =&gt; FlagType::STRING,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;desc&#x27;   =&gt; &#x27;option name is to lang, desc will print on newline&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;shorts&#x27; =&gt; [&#x27;d&#x27;,&#x27;e&#x27;,&#x27;f&#x27;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // TIP: add validator limit input value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;validator&#x27; =&gt; EnumValidator::new([&#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;]),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// - 使用 Option 对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$opt = Option::new(&#x27;str1&#x27;, &quot;this is  string option, \ndesc has multi line, \nhaha...&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$opt-&gt;setDefault(&#x27;defVal&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$fs-&gt;addOption($opt);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="定义参数">定义参数<a class="hash-link" href="#定义参数" title="标题的直接链接">​</a></h3><p>定义参数 - 定义好支持的选项设置，解析时将会根据定义来解析输入</p><p>添加参数定义的示例:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">use Toolkit\PFlag\Flag\Argument;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Toolkit\PFlag\FlagType;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// add arguments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// - quick add</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$fs-&gt;addArg(&#x27;strArg1&#x27;, &#x27;the is string arg and is required&#x27;, &#x27;string&#x27;, true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// - 使用字符串规则快速添加定义</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$fs-&gt;addArgByRule(&#x27;intArg2&#x27;, &#x27;int;this is a int arg and with default value;no;89&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// - 使用 Argument 对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$arg = Argument::new(&#x27;arrArg&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// OR $arg-&gt;setType(FlagType::ARRAY);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$arg-&gt;setType(FlagType::STRINGS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$arg-&gt;setDesc(&quot;this is an array arg,\n allow multi value,\n must define at last&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$fs-&gt;addArgument($arg);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="解析命令行输入">解析命令行输入<a class="hash-link" href="#解析命令行输入" title="标题的直接链接">​</a></h3><p>最后调用 <code>parse()</code> 解析命令行输入数据</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (!$fs-&gt;parse($flags)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // on render help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vdump($fs-&gt;getOpts(), $fs-&gt;getArgs());</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>显示帮助</strong></p><p>当输入 <code>-h</code> 或 <code>--help</code> 会自动渲染帮助信息。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ php example/flags-demo.php --help</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Output:</p><p><img loading="lazy" src="https://github.com/php-toolkit/pflag/blob/main/example/images/flags-demo.png?raw=true" alt="flags-demo" class="img_ev3q"></p><p><strong>运行示例:</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ php example/flags-demo.php --name inhere --age </span><span class="token number" style="color:#36acaa">99</span><span class="token plain"> --tag go -t php -t java -d one -f arg0 </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"> arr0 arr1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>输出结果:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 选项数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">array(6) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [&quot;str1&quot;]=&gt; string(6) &quot;defVal&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [&quot;name&quot;]=&gt; string(6) &quot;inhere&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [&quot;age&quot;]=&gt; int(99)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [&quot;tag&quot;]=&gt; array(3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [0]=&gt; string(2) &quot;go&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [1]=&gt; string(3) &quot;php&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [2]=&gt; string(4) &quot;java&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [&quot;name-is-very-lang&quot;]=&gt; string(3) &quot;one&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [&quot;f&quot;]=&gt; bool(true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 参数数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">array(3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]=&gt; string(4) &quot;arg0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [1]=&gt; int(80)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [2]=&gt; array(2) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [0]=&gt; string(4) &quot;arr0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [1]=&gt; string(4) &quot;arr1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="获取输入值">获取输入值<a class="hash-link" href="#获取输入值" title="标题的直接链接">​</a></h2><p>获取flag值很简单，使用方法 <code>getOpt(string $name)</code> <code>getArg($nameOrIndex)</code> 即可.</p><blockquote><p>TIP: 将通过定义的数据类型自动格式化输入值</p></blockquote><p><strong>选项数据</strong></p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$force = $fs-&gt;getOpt(&#x27;f&#x27;); // bool(true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$age  = $fs-&gt;getOpt(&#x27;age&#x27;); // int(99)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$name = $fs-&gt;getOpt(&#x27;name&#x27;); // string(inhere)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$tags = $fs-&gt;getOpt(&#x27;tags&#x27;); // array{&quot;php&quot;, &quot;go&quot;, &quot;java&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>参数数据</strong></p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$arg0 = $fs-&gt;getArg(0); // string(arg0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// get an array arg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$arrArg = $fs-&gt;getArg(1); // array{&quot;arr0&quot;, &quot;arr1&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// get value by name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$arrArg = $fs-&gt;getArg(&#x27;arrArg&#x27;); // array{&quot;arr0&quot;, &quot;arr1&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="扩展规则定义">扩展：规则定义<a class="hash-link" href="#扩展规则定义" title="标题的直接链接">​</a></h2><p>选项参数规则。使用规则可以快速定义一个选项或参数。</p><ul><li>string 字符串规则以分号 <code>;</code> 分割每个部分 (完整规则：<code>type;desc;required;default;shorts</code>).</li><li>array 规则按 <code>SFlags::DEFINE_ITEM</code> 设置定义</li><li>支持的类型常量请看 <code>FlagType::*</code></li></ul><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">use Toolkit\PFlag\FlagType;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$rules = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     // v: 只有值，作为名称并使用默认类型 FlagType::STRING</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     // k-v: 键是名称，值可以是字符串|数组</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &#x27;long,s&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     // name =&gt; rule</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &#x27;long,a,b&#x27; =&gt; &#x27;int;an int option&#x27;, // long is option name, a and b is shorts.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &#x27;f&#x27;      =&gt; FlagType::BOOL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &#x27;str1&#x27;   =&gt; [&#x27;type&#x27; =&gt; &#x27;int&#x27;, &#x27;desc&#x27; =&gt; &#x27;an string option&#x27;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &#x27;tags&#x27;   =&gt; &#x27;array; an array option&#x27;, // can also: ints, strings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &#x27;name&#x27;   =&gt; &#x27;type;the description message;required;default&#x27;, // with desc, default, required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>对于选项</strong></p><ul><li>选项允许设置短名称 <code>shorts</code></li></ul><blockquote><p>TIP: 例如 <code>long,a,b</code> - <code>long</code> 是选项名称. 剩余的 <code>a,b</code> 都是它的短选项名.</p></blockquote><p><strong>对于参数</strong></p><ul><li>参数没有别名或者短名称</li><li>数组参数只允许定义在最后</li></ul><p><strong>数组定义项</strong></p><p>常量 <code>Flags::DEFINE_ITEM</code>:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public const DEFINE_ITEM = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;name&#x27;      =&gt; &#x27;&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;desc&#x27;      =&gt; &#x27;&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;type&#x27;      =&gt; FlagType::STRING,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;helpType&#x27;  =&gt; &#x27;&#x27;, // use for render help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // &#x27;index&#x27;    =&gt; 0, // only for argument</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;required&#x27;  =&gt; false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;default&#x27;   =&gt; null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;shorts&#x27;    =&gt; [], // only for option</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // value validator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;validator&#x27; =&gt; null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // &#x27;category&#x27; =&gt; null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="自定义设置">自定义设置<a class="hash-link" href="#自定义设置" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="解析设置">解析设置<a class="hash-link" href="#解析设置" title="标题的直接链接">​</a></h3><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    // -------------------- 选项解析设置 --------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Stop parse option on found first argument.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - Useful for support multi commands. eg: `top --opt ... sub --opt ...`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @var bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected $stopOnFistArg = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Skip on found undefined option.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - FALSE will throw FlagException error.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - TRUE  will skip it and collect as raw arg, then continue parse next.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @var bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected $skipOnUndefined = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // -------------------- 参数解析设置 --------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Whether auto bind remaining args after option parsed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @var bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected $autoBindArgs = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Strict match args number.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * if exist unbind args, will throw FlagException</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @var bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected $strictMatchArgs = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="渲染帮助设置">渲染帮助设置<a class="hash-link" href="#渲染帮助设置" title="标题的直接链接">​</a></h3><p>support some settings for render help</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // -------------------- settings for built-in render help --------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 自动渲染帮助信息当输入 &#x27;-h&#x27;, &#x27;--help&#x27; 选项时</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @var bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected $autoRenderHelp = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 在渲染的帮助信息上显示数据类型</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * if False:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * -o, --opt    Option desc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * if True:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * -o, --opt STRING   Option desc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @var bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected $showTypeOnHelp = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 将在打印帮助消息之前调用它</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @var callable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private $beforePrintHelp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>自定义帮助消息渲染:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$fs-&gt;setHelpRenderer(function (\Toolkit\PFlag\FlagsParser $fs) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // render help messages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="单元测试">单元测试<a class="hash-link" href="#单元测试" title="标题的直接链接">​</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">phpunit --debug</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>test with coverage:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">phpdbg -qrr </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">which</span><span class="token variable" style="color:#36acaa"> phpunit</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> --coverage-text</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="使用pflag的项目">使用pflag的项目<a class="hash-link" href="#使用pflag的项目" title="标题的直接链接">​</a></h2><p>这些项目使用了 <a href="https://github.com/php-toolkit/pflag" target="_blank" rel="noopener noreferrer">https://github.com/php-toolkit/pflag</a> :</p><ul><li><a href="https://github.com/inhere/console" target="_blank" rel="noopener noreferrer">inhere/console</a> Full-featured php command line application library.</li><li><a href="https://github.com/inhere/kite" target="_blank" rel="noopener noreferrer">kite</a> Kite is a tool for help development.</li><li>更多的请看 <a href="https://packagist.org/packages/toolkit/pflag" target="_blank" rel="noopener noreferrer">Packagist</a></li></ul><blockquote><p>Github 仓库: <a href="https://github.com/php-toolkit/pflag" target="_blank" rel="noopener noreferrer">php-toolkit/pflag</a></p></blockquote></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/php">php</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cli">cli</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/command-line">command-line</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/parser">parser</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/inhere/inhere.github.io/tree/main/blog/2021/10-11-pflag-better-php-command-line-parse-library.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="博文分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/gookit-slog-intro"><div class="pagination-nav__sublabel">较新一篇</div><div class="pagination-nav__label">slog - 一个易于使用的，易扩展、可配置的日志库</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/2021/08/09/learn-bash-completion"><div class="pagination-nav__sublabel">较旧一篇</div><div class="pagination-nav__label">学习编写bash命令自动补全</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#功能说明" class="table-of-contents__link toc-highlight">功能说明</a></li><li><a href="#安装" class="table-of-contents__link toc-highlight">安装</a></li><li><a href="#flags-使用" class="table-of-contents__link toc-highlight">Flags 使用</a><ul><li><a href="#创建解析器" class="table-of-contents__link toc-highlight">创建解析器</a></li><li><a href="#定义选项" class="table-of-contents__link toc-highlight">定义选项</a></li><li><a href="#定义参数" class="table-of-contents__link toc-highlight">定义参数</a></li><li><a href="#解析命令行输入" class="table-of-contents__link toc-highlight">解析命令行输入</a></li></ul></li><li><a href="#获取输入值" class="table-of-contents__link toc-highlight">获取输入值</a></li><li><a href="#扩展规则定义" class="table-of-contents__link toc-highlight">扩展：规则定义</a></li><li><a href="#自定义设置" class="table-of-contents__link toc-highlight">自定义设置</a><ul><li><a href="#解析设置" class="table-of-contents__link toc-highlight">解析设置</a></li><li><a href="#渲染帮助设置" class="table-of-contents__link toc-highlight">渲染帮助设置</a></li></ul></li><li><a href="#单元测试" class="table-of-contents__link toc-highlight">单元测试</a></li><li><a href="#使用pflag的项目" class="table-of-contents__link toc-highlight">使用pflag的项目</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/inhere" target="_blank" rel="noopener noreferrer" class="footer__link-item">Inhere GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/gookit" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gookit GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/phppkg" target="_blank" rel="noopener noreferrer" class="footer__link-item">PHPPkg GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/tags">Blog Tags</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/archive">Blog Archives</a></li><li class="footer__item"><a href="https://github.com/inhere/inhere.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Site GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 My Project, Inc.
         Built with <a target="block" href="https://github.com/facebook/docusaurus">Docusaurus</a>.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.841bab0d.js"></script>
<script src="/assets/js/main.4fdf3650.js"></script>
</body>
</html>