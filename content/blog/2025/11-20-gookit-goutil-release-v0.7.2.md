---
title: gookit/goutil v0.7.2 å‘å¸ƒï¼šå¢å¼ºåŠŸèƒ½ä¸ä¿®å¤ï¼Œæå‡å¼€å‘ä½“éªŒ
date: 2025-11-20T21:42:00
taxonomies:
  tags: [gookit, ai-glm]
---

`gookit/goutil` v0.7.2 ç°å·²å‘å¸ƒï¼æ­¤ç‰ˆæœ¬å¸¦æ¥äº†å¤šé¡¹æ–°åŠŸèƒ½ã€ä¼˜åŒ–å’Œé—®é¢˜ä¿®å¤ï¼Œè¿›ä¸€æ­¥å¢å¼ºäº†è¿™ä¸ª Go è¯­è¨€å®ç”¨å·¥å…·åº“çš„ç¨³å®šæ€§å’Œæ˜“ç”¨æ€§ã€‚
æœ¬æ¬¡æ›´æ–°æ¶‰åŠå¤šä¸ªæ¨¡å—ï¼ŒåŒ…æ‹¬æ•°å­¦å·¥å…·ã€å­—ç¬¦ä¸²å¤„ç†ã€æ–‡ä»¶ç³»ç»Ÿæ“ä½œã€å‘½ä»¤è¡Œæ ‡å¿—å¤„ç†ç­‰ï¼Œæ—¨åœ¨ä¸ºå¼€å‘è€…æä¾›æ›´ä¸°å¯Œã€æ›´é«˜æ•ˆçš„å·¥å…·é›†ã€‚

<!-- more -->

-  é¡¹ç›®ä¸»é¡µï¼š[https://github.com/gookit/goutil](https://github.com/gookit/goutil)
-  å®Œæ•´å˜æ›´æ—¥å¿—ï¼š[v0.7.2 Release Notes](https://github.com/gookit/goutil/releases/tag/v0.7.2)
-  å®Œæ•´æ–‡æ¡£æŸ¥çœ‹ https://zread.ai/gookit/goutil

## ğŸ› ï¸ ä¸»è¦é—®é¢˜ä¿®å¤

æœ¬ç‰ˆæœ¬ä¿®å¤äº†å‡ ä¸ªå…³é”®é—®é¢˜ï¼Œç¡®ä¿å·¥å…·åº“çš„ç¨³å®šè¿è¡Œï¼š

-   **ccolor æ¨¡å—**ï¼šä¿®å¤äº† `NO_COLOR` ç¯å¢ƒå˜é‡åœ¨æ‰“å°æ—¶æ— æ³•æ­£å¸¸å·¥ä½œçš„é—®é¢˜ï¼Œæå‡äº†é¢œè‰²è¾“å‡ºçš„å…¼å®¹æ€§ã€‚
-   **cflag æ¨¡å—**ï¼š
    -   ä¿®å¤äº†è§£æå…¨å±€æ ‡å¿—æ—¶ `capp` è¿è¡Œé”™è¯¯çš„é—®é¢˜ã€‚
    -   ä¿®å¤äº†åœ¨æ²¡æœ‰å‘½ä»¤è¾“å…¥æ—¶ `OnAppFlagParsed` äº‹ä»¶æœªè§¦å‘çš„é—®é¢˜ï¼Œç¡®ä¿äº‹ä»¶å¤„ç†é€»è¾‘çš„å®Œæ•´æ€§ã€‚

## âœ¨ æ–°å¢åŠŸèƒ½äº®ç‚¹

### math å·¥å…·
-   æ–°å¢ `IsInteger` å‡½æ•°ï¼Œç”¨äº**ä¸¥æ ¼æ£€æŸ¥å€¼æ˜¯å¦ä¸ºæ•´æ•°ç±»å‹**ï¼ˆå¦‚ `int(x)`, `uint(x)`ï¼‰ã€‚
-   æ–°å¢ `StrictInt` å’Œ `StrictUint` è½¬æ¢å‡½æ•°ï¼Œæä¾›æ›´ä¸¥æ ¼çš„æ•´æ•°ç±»å‹è½¬æ¢ã€‚
-   æ–°å¢ `FormatBytes` å‡½æ•°ï¼Œå¯å°†å­—èŠ‚å¤§å°æ ¼å¼åŒ–ä¸º**æ˜“è¯»çš„å­—ç¬¦ä¸²**ï¼ˆå¦‚ "1.2 MB"ï¼‰ï¼Œæ–¹ä¾¿æ—¥å¿—è¾“å‡ºå’Œç”¨æˆ·ç•Œé¢æ˜¾ç¤ºã€‚

### string å·¥å…·
-   æ–°å¢ `NumVersion` å‡½æ•°ï¼Œç”¨äºå¿«é€Ÿè·å–ç‰ˆæœ¬å·å­—ç¬¦ä¸²ä¸­çš„æ•°å­—éƒ¨åˆ†ã€‚
-   æ–°å¢ `ReplaceVars` å‡½æ•°ï¼Œæ”¯æŒå¿«é€Ÿæ¸²æŸ“åŒ…å« `{var}` å ä½ç¬¦çš„å­—ç¬¦ä¸²ï¼Œç®€åŒ–æ¨¡æ¿æ›¿æ¢æ“ä½œã€‚
-   æ–°å¢ `IsUpper` å’Œ `IsLower` å‡½æ•°ï¼Œç”¨äºæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦å…¨éƒ¨ä¸ºå¤§å†™æˆ–å°å†™ã€‚
-   æ–°å¢ `IsUint` å’Œ `IsPositiveNum` å‡½æ•°ï¼Œå¢å¼ºå­—ç¬¦ä¸²æ•°å€¼éªŒè¯èƒ½åŠ›ã€‚
-   æ–°å¢ `BaseConvInt` å’Œ `BaseConvIntByTpl` å‡½æ•°ï¼Œæ”¯æŒä¸åŒè¿›åˆ¶é—´çš„æ•´æ•°è½¬æ¢ã€‚
-   æ–°å¢ `ContainsByteOne` å‡½æ•°ï¼Œæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«æŒ‡å®šå­—èŠ‚ä¹‹ä¸€ã€‚
-   ä¼˜åŒ– `MTimeBaseID` å‡½æ•°ï¼Œç°åœ¨æ”¯æŒå¤§äº 36 çš„è¿›åˆ¶ã€‚

### æ–‡ä»¶ç³»ç»Ÿå·¥å…·
-   æ–°å¢ `EnsureDir` å‡½æ•°ï¼Œç¡®ä¿ç›®å½•å­˜åœ¨ï¼ˆå¦‚ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰ã€‚
-   æ–°å¢ `HomeDir`/`UserHomeDir` å‡½æ•°ï¼Œç”¨äºè·å–ç”¨æˆ·ä¸»ç›®å½•è·¯å¾„ã€‚
-   æ–°å¢ `CreateSymlink` å’Œ `IsSymlink` å‡½æ•°ï¼Œæ”¯æŒç¬¦å·é“¾æ¥çš„åˆ›å»ºä¸æ£€æµ‹ã€‚
-   æ–°å¢ `FindAllInParentDirs`ã€`FindOneInParentDirs` å’Œ `FindNameInParentDirs` å‡½æ•°ï¼Œæ”¯æŒåœ¨**çˆ¶çº§ç›®å½•ä¸­æŸ¥æ‰¾æ–‡ä»¶**ï¼Œç®€åŒ–é¡¹ç›®é…ç½®æ–‡ä»¶çš„å®šä½ã€‚

### æ•°ç»„/åˆ‡ç‰‡å·¥å…·
-   æ–°å¢ `ToMap` å‡½æ•°ï¼Œç”¨äºå°†åˆ—è¡¨ï¼ˆåˆ‡ç‰‡ï¼‰è½¬æ¢ä¸ºæ˜ å°„ã€‚
-   æ–°å¢ `Map1` å‡½æ•°ï¼Œç”¨äºå°†ä¸€ä¸ªåˆ—è¡¨è½¬æ¢ä¸ºæ–°çš„åˆ—è¡¨ï¼ˆç±»ä¼¼ map æ“ä½œï¼‰ã€‚

### æ˜ å°„å·¥å…·
-   æ–°å¢ `AppendSMap` å‡½æ•°ï¼Œç”¨äºåˆå¹¶å­—ç¬¦ä¸²mapã€‚
-   æ–°å¢ `AliasesNames` å‡½æ•°ï¼Œç”¨äºå¤„ç†åˆ«ååç§°ã€‚

### æµ‹è¯•å·¥å…·
-   æ–°å¢ `assert.StrContainsAll` æ–­è¨€å‡½æ•°ï¼Œæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«æ‰€æœ‰æŒ‡å®šçš„å­ä¸²ã€‚
-   æ–°å¢ `testutil.SafeBuffer` ç±»å‹ï¼Œè¿™æ˜¯ä¸€ä¸ª**çº¿ç¨‹å®‰å…¨çš„ç¼“å†²åŒº**ï¼Œä¸“ä¸ºå¹¶å‘æµ‹è¯•åœºæ™¯è®¾è®¡ã€‚
-   å¢å¼º `testutil.EchoServer`ï¼Œç°åœ¨æ”¯æŒå“åº” 404ã€405ã€500 æˆ–è‡ªå®šä¹‰çŠ¶æ€ç ï¼Œä¾¿äºæµ‹è¯• HTTP å®¢æˆ·ç«¯çš„é”™è¯¯å¤„ç†é€»è¾‘ã€‚

### å‘½ä»¤è¡Œå·¥å…·
-   `cflag` æ¨¡å—æ–°å¢ `HelpOnEmptyArgs` é…ç½®é€‰é¡¹ï¼Œå½“æ²¡æœ‰æä¾›å‚æ•°æ—¶è‡ªåŠ¨æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚
-   ä¼˜åŒ–å¸®åŠ©ä¿¡æ¯çš„æ¸²æŸ“è¾“å‡ºã€‚
-  `cflag/capp` å‘½ä»¤æ–°å¢æ”¯æŒè®¾ç½®åˆ«å

### æ—¶é—´å·¥å…·
-   æ–°å¢ `FormatDuration` å‡½æ•°ï¼Œç”¨äºå°†æ—¶é—´æ¶ˆè€—æ ¼å¼åŒ–ä¸º**æ—¶é’Ÿæ ¼å¼**ï¼ˆå¦‚ "1h 23m 45s"ï¼‰ï¼Œéå¸¸é€‚åˆæ€§èƒ½ç»Ÿè®¡çš„å±•ç¤ºã€‚

## âš¡ æ€§èƒ½ä¼˜åŒ–ä¸é‡æ„

-   ä¼˜åŒ– `ToStringWith` å‡½æ•°çš„é€šç”¨é€»è¾‘ï¼Œæå‡è½¬æ¢æ€§èƒ½ã€‚
-   é‡æ„ `cflag.App` è‡³å­åŒ… `capp.App`ï¼Œæ”¹è¿›ä»£ç ç»„ç»‡ç»“æ„ã€‚
-   ä¼˜åŒ– `ToInt64With` å‡½æ•°çš„å¤„ç†é€‰é¡¹é€»è¾‘ï¼Œæå‡è½¬æ¢æ•ˆç‡ã€‚
-   å°†æ•´æ•°è½¬æ¢ç›¸å…³ä»£ç æ‹†åˆ†è‡³ `conv2int.go`ï¼Œå¹¶ä¼˜åŒ–äº† `mathutil` ä¸­æ‰€æœ‰æ•´æ•°è½¬æ¢ç›¸å…³æ–¹æ³•çš„æ€§èƒ½ã€‚
-   æ›´æ–° `VersionCompare` å‡½æ•°é€»è¾‘ï¼Œä¿®å¤äº†éƒ¨åˆ†æ¯”è¾ƒé”™è¯¯ï¼Œæå‡ç‰ˆæœ¬æ¯”è¾ƒçš„å‡†ç¡®æ€§ã€‚
-   `textutil` ä¸­çš„ `VarReplacer` ç°åœ¨æ”¯æŒå°†å˜é‡åä½œä¸ºç¯å¢ƒå˜é‡è¿›è¡Œè§£æï¼Œå¢å¼ºäº†åŠ¨æ€é…ç½®èƒ½åŠ›ã€‚

## ğŸŒ å¹³å°å…¼å®¹æ€§ä¸å¼€å‘æµç¨‹

-   **æ–°å¢å¯¹ FreeBSD/Unix ç³»ç»Ÿçš„æ”¯æŒ**ï¼Œæ‰©å±•äº† `sysutil` åŒ…çš„å¹³å°è¦†ç›–èŒƒå›´ã€‚
-   ä¸º gookit/goutil æ·»åŠ äº†å…¨é¢çš„ **GitHub Copilot æŒ‡ä»¤**ï¼Œä¼˜åŒ–äº†åŸºäº AI çš„å¼€å‘å·¥ä½œæµã€‚
-   å‡çº§ `github/codeql-action` ä¾èµ–ä»ç‰ˆæœ¬ 3 åˆ° 4ï¼Œæå‡äº†ä»£ç åˆ†æçš„å®‰å…¨æ€§å’Œèƒ½åŠ›ã€‚

## ğŸ“ å…¶ä»–æ›´æ–°

-   ä¸º `dump` è¾“å‡ºæ·»åŠ äº† `ShowLen` é€‰é¡¹ï¼Œå…è®¸æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºé•¿åº¦ä¿¡æ¯ã€‚
-   æ›´æ–°äº† README ç”Ÿæˆ CLI å’Œç›¸å…³æ–‡æ¡£ï¼Œæ”¹è¿›äº†é¡¹ç›®æ–‡æ¡£çš„ç”Ÿæˆæµç¨‹å’Œæ¨¡æ¿ã€‚
-   ä¿®å¤äº†å•å…ƒæµ‹è¯•é”™è¯¯å¹¶ç»Ÿä¸€äº†ä»£ç é£æ ¼ã€‚
-   å¯¹éƒ¨åˆ†æ³¨é‡Šå’Œä»£ç é£æ ¼è¿›è¡Œäº†æ›´æ–°ã€‚

## ğŸ“¦ å¦‚ä½•æ›´æ–°

æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥è·å–æœ€æ–°ç‰ˆæœ¬ï¼š

```bash
go get github.com/gookit/goutil@v0.7.2
```

### è¿ç§»ä¸å…¼å®¹æ€§æ³¨æ„

- `cflag -> cflag/capp` å­åŒ…é‡æ„ï¼šcflag.App è¢«é‡æ„ä¸º capp.Appã€‚å¦‚æœä½ çš„ä»£ç ç›´æ¥å¼•ç”¨ cflag.Appï¼Œè¯·è°ƒæ•´ï¼š
  - æ—§ï¼š`import "github.com/gookit/goutil/cflag"`
  - æ–°ï¼š`import "github.com/gookit/goutil/capp"`
  - å¹¶å°†ç›¸å…³ç±»å‹/è°ƒç”¨åˆ‡æ¢åˆ° `capp` åŒ…çš„ Appã€‚

> TIP: è¿™æ˜¯æœ¬æ¬¡å¯èƒ½çš„ç ´åæ€§å˜æ›´ï¼Œè¯·åœ¨å‡çº§å‰æ£€æŸ¥å¹¶æ›´æ–°å¼•ç”¨ã€‚

- `VersionCompare` ä¸ä¸€äº›å­—ç¬¦ä¸²/ç‰ˆæœ¬ç›¸å…³é€»è¾‘åšäº†ä¼˜åŒ–ï¼Œè‹¥ä½ ä¾èµ–æ—§é€»è¾‘çš„è¾¹ç•Œè¡Œä¸ºï¼ˆå¦‚æ¯”è¾ƒç›¸ç­‰æˆ–æ’åºï¼‰ï¼Œè¯·åœ¨å‡çº§åè¿è¡Œç›¸å…³å•å…ƒæµ‹è¯•éªŒè¯ã€‚
### ç¤ºä¾‹ç‰‡æ®µ
 ä½¿ç”¨ `mathutil.IsInteger / StrictInt`

```go
import "github.com/gookit/goutil/mathutil"
import "github.com/gookit/goutil/testutil/assert"

val := 123
if mathutil.IsInteger(val) {
    // true
}
i64, ok := mathutil.StrictInt("42") // ä¸å…è®¸stringè½¬æ¢ä¸ºæ•´å‹
assert.False(t, ok)
```

ä½¿ç”¨ `strutil.ReplaceVars`

```go
import "github.com/gookit/goutil/strutil"

tpl := "Hello, {name}! Today is {day}."
out := strutil.ReplaceVars(tpl, map[string]string{
    "name": "Gopher",
    "day":  "Wednesday",
})
// Output: "Hello, Gopher! Today is Wednesday."
```

ä½¿ç”¨ `fsutil.EnsureDir`

```go
import "github.com/gookit/goutil/fsutil"

if err := fsutil.EnsureDir("/tmp/myapp/logs"); err != nil {
    // å¤„ç†é”™è¯¯
}
```
## ğŸ¤ è´¡çŒ®

æˆ‘ä»¬æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å¯¹æœ¬æ¬¡ç‰ˆæœ¬å‘å¸ƒçš„åŠªåŠ›ï¼å¦‚æœæ‚¨å‘ç°äº†ä»»ä½•é—®é¢˜æˆ–æœ‰åŠŸèƒ½å»ºè®®ï¼Œæ¬¢è¿åœ¨ [GitHub Issues](https://github.com/gookit/goutil/issues) ä¸­æå‡ºã€‚

## ğŸ“– æ›´å¤šä¿¡æ¯

-  é¡¹ç›®ä¸»é¡µï¼š[https://github.com/gookit/goutil](https://github.com/gookit/goutil)
-  å®Œæ•´å˜æ›´æ—¥å¿—ï¼š[v0.7.2 Release Notes](https://github.com/gookit/goutil/releases/tag/v0.7.2)
-  å®Œæ•´æ–‡æ¡£æŸ¥çœ‹ https://zread.ai/gookit/goutil

äº«å— v0.7.2 å¸¦æ¥çš„æ–°åŠŸèƒ½å’Œæ”¹è¿›å§ï¼